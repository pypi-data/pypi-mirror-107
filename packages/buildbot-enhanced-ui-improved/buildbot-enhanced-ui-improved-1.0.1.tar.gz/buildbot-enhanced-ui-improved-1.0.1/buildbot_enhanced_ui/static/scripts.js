BOWERDEPS="undefined"==typeof BOWERDEPS?{}:BOWERDEPS,function(){var e,t;e=function(){function e(){return["ui.router","buildbot_config","guanlecoja.ui","bbData"]}return e}(),t=function(){function e(e,t){var r,i,n,o;n="buildbot_enhanced_ui",r="Enhanced View",t.addGroup({name:n,caption:r,icon:"rocket",order:5}),i={group:n,caption:r},o={controller:"buildbotEnhancedUiController",controllerAs:"CTRL",templateUrl:"buildbot_enhanced_ui/views/dashboard.html",name:n,url:"/"+n,data:i},e.state(o)}return e}(),angular.module("buildbot_enhanced_ui",new e).config(["$stateProvider","glMenuServiceProvider",t])}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,r,i,n,o,s){var a;this.$stateParams=r,this.$state=i,this.buildMouseLeaveHandler=t(this.buildMouseLeaveHandler,this),this.buildMouseOverHandler=t(this.buildMouseOverHandler,this),this.builderGroupClickHandler=t(this.builderGroupClickHandler,this),this.updateSearchText=t(this.updateSearchText,this),this.isErrorLogVisible=t(this.isErrorLogVisible,this),this.forceBuildClickHandler=t(this.forceBuildClickHandler,this),this.onChange=t(this.onChange,this),angular.extend(e,s),a=n.open().closeOnDestroy(e),e.builders_groups=o.plugins.buildbot_enhanced_ui.builders_groups,e.builders=a.getBuilders(),e.builds=a.getBuilds({limit:20,order:"-started_at"}),e.builders.onChange=e.builds.onChange=this.onChange,this.$scope=e,this.dataService=n}return e.prototype.dataReady=function(){var e,t,r,i,n;for(e=this.$scope,n=[e.builders,e.builds],r=0,i=n.length;i>r;r++)if(t=n[r],!(t.$resolved&&t.length>0))return!1;return!0},e.prototype.onChange=function(){return this.dataReady()?this.refreshGroupsDisplay():void 0},e.prototype._set_cookie=function(e,t){document.cookie=e.concat("=").concat(t)},e.prototype._get_cookie=function(e){var t;return t=document.cookie.split("; ").find(function(t){return t.startsWith(e.concat("="))}),void 0!==t?t.split("=")[1]:""},e.prototype.get_group_state=function(e){var t;return t=this._get_cookie(e.concat("_toggle_status")),""===t?"true":"true"===t},e.prototype.switch_group_state=function(e){var t;t=this.get_group_state(e.attr("id")),t===!1?this.set_group_state(e.attr("id"),!0):this.set_group_state(e.attr("id"),!1)},e.prototype.switch_chevron_icon=function(e){var t,r;r=this.get_group_state(e.attr("id")),t=e.children().children("span"),r===!0?t.attr("class","fa fa-chevron-down"):t.attr("class","fa fa-chevron-right")},e.prototype.toggle_group_builders=function(e){var t,r;t=this.get_group_state(e.attr("id")),r=e.nextAll(".builder_groups"),t===!1?0===r.length?e.nextAll("tr.ng-scope").hide():e.nextUntil(".builder_groups").hide():0===r.length?e.nextAll("tr.ng-scope").show():e.nextUntil(".builder_groups").show()},e.prototype.set_group_state=function(e,t){this._set_cookie(e.concat("_toggle_status"),t)},e.prototype.refreshGroupsDisplay=function(){return $(".builder_groups").each(function(){return e.prototype.toggle_group_builders($(this)),e.prototype.switch_chevron_icon($(this))})},e.prototype.forceBuildClickHandler=function(e){return this.dataService.control("forceschedulers","force","force",{branch:"",builderid:e.builderid,project:"",reason:"force build",repository:"",revision:"",username:""})},e.prototype.isErrorLogVisible=function(e){var t,r;return t=this.$scope,r=t["build_".concat(e.buildid,"_",e.builderid,"_visible")],e.results>=2&&r},e.prototype.updateSearchText=function(e){var t;return t=this.$scope,t.search_text=e.search_text_value},e.prototype.builderGroupClickHandler=function(t){var r;return r=t.currentTarget,e.prototype.switch_group_state($(r)),e.prototype.switch_chevron_icon($(r)),e.prototype.toggle_group_builders($(r))},e.prototype.buildMouseOverHandler=function(e,t){var r;return r=this.$scope,e.results>=2?(r["build_".concat(e.buildid,"_",e.builderid,"_visible")]=!0,e.loadSteps().onChange=function(e){return function(r){var i,n,o,s,a;for(a=[],o=0,s=r.length;s>o;o++)i=r[o],0!==i.results?(n=e.dataService.get("steps/"+i.stepid+"/logs/stdio"),a.push(n.onNew=function(r){var n;return n=e.dataService.get("steps/"+i.stepid+"/logs/stdio/contents",{offset:Math.max(r.num_lines-40,0)}),n.onNew=function(e){var r,i,n,o,s,a;for(a=[],o=e.content.split("\n"),r=0,i=o.length;i>r;r++)n=o[r],"e"===n[0]?(s="<span style='color: red'>".concat(n.slice(1)).concat("</span>"),a.push(s)):a.push(n.slice(1));return $(t.currentTarget).children().html(a.join("\n"))}})):a.push(void 0);return a}}(this)):void 0},e.prototype.buildMouseLeaveHandler=function(e){var t;return t=this.$scope,t["build_".concat(e.buildid,"_",e.builderid,"_visible")]=!1},e}(),angular.module("buildbot_enhanced_ui").controller("buildbotEnhancedUiController",["$scope","$stateParams","$state","dataService","config","resultsService",e])}.call(this),angular.module("buildbot_enhanced_ui").run(["$templateCache",function(e){e.put("buildbot_enhanced_ui/views/dashboard.html",'<html lang="en"><body><div class="search_container"><form class="search_form"><label for="fname">Research a builder</label><input class="search_text_bar" type="text" id="fname" name="fname" ng-change="CTRL.updateSearchText(this)" ng-model="search_text_value"/></form></div><div class="main_container"><table class="dashboard_table"><thead class="enhanced_table_header"><tr><th>Builder name</th><th>Builds</th><th>Actions</th></tr></thead><tbody><tr class="builder_groups" id="group_{{ group_name }}" ng-repeat-start="(group_name, group_builders) in builders_groups" ng-click="CTRL.builderGroupClickHandler($event)"><th colspan="3"><span class="fa fa-chevron-down"></span>&nbsp;&nbsp; {{ group_name }}</th></tr><tr ng-repeat="builder in builders" ng-if="group_builders.indexOf(builder.name) &gt; -1 &amp;&amp; (builder.name.toLowerCase().includes(search_text.toLowerCase()) || !search_text)" ng-repeat-end="ng-repeat-end"><td class="builder_name_container"><a ui-sref="builder({builder: builder.builderid})">{{Â builder.name }}</a></td><td class="builds_list_container"><a class="badge-status badge build_badge" ui-sref="build({builder: builder.builderid, build: build.number})" ng-repeat="build in builds" ng-if="build.builderid == builder.builderid" ng-class="results2class(build, \'pulse\')" ng-mouseover="CTRL.buildMouseOverHandler(build, $event)" ng-mouseleave="CTRL.buildMouseLeaveHandler(build)">{{ build.number }}<span class="error_log_detail" ng-show="CTRL.isErrorLogVisible(build)"></span></a></td><td class="actions_container"><a class="badge-status badge action_button force_build_action" style="cursor: grab;" ng-class="results2class(null, \'pulse\')" ng-click="CTRL.forceBuildClickHandler(builder)">Build</a></td></tr></tbody></table></div></body></html>')}]);