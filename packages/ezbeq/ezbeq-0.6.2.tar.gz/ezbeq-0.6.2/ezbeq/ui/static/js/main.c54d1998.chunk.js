(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{144:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(15),i=n.n(s),o=(n(135),n(7)),u=n(64),l=n(109),d=n(208),j=n(13),p=n.n(j),f=n(19),h=n(60),b="/api/1",O=new function e(){var t=this;Object(h.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getContentTypes=function(){return t.doGet("contenttypes")},this.getMeta=function(){return t.doGet("meta")},this.getVersion=function(){return t.doGet("version")},this.doGet=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/").concat(t),{method:"GET"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){if(n&&n.length>0){var a=n.map((function(e){return"".concat(t,"=").concat(e)})).join("&");return"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(a)}return e},this.search=Object(f.a)(p.a.mark((function e(){var n,a,r,c,s,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,a=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]?i[2]:null,c=t.appendTo(t.appendTo(t.appendTo("".concat(b,"/search"),"authors",n),"years",a),"audioTypes",r),e.next=6,fetch(c,{method:"GET"});case 6:if((s=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(s.status));case 9:return e.next=11,s.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),this.load=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(f.a)(p.a.mark((function e(n,a){var r,c,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=s.length>2&&void 0!==s[2]?s[2]:null)){e.next=7;break}return e.next=4,t.doPatch(t.createPatchPayload(r,a,n));case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,fetch("".concat(b,"/devices/master/filter/").concat(a),{method:"PUT",body:JSON.stringify({entryId:n}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 9:if((c=e.sent).ok){e.next=12;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(c.status));case 12:return e.next=14,c.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/devices/master/filter/").concat(t),{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/devices/master/config/").concat(t,"/active"),{method:"PUT"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.resetInputGain=function(){var e=Object(f.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.setGains(n,{inputOne_mv:0,inputTwo_mv:0,inputOne_mute:!1,inputTwo_mute:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setGains=function(){var e=Object(f.a)(p.a.mark((function e(n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doPatch(t.createPatchPayload(a,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.doPatch=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/devices/master"),{method:"PATCH",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createPatchPayload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={};e.hasOwnProperty("master_mv")&&(a.masterVolume=parseFloat(e.master_mv)),e.hasOwnProperty("master_mute")&&(a.mute=e.master_mute);var r={id:String(t),gain1:parseFloat(e.inputOne_mv),gain2:parseFloat(e.inputTwo_mv),mute1:e.inputOne_mute,mute2:e.inputTwo_mute};return a.slots=n?[Object.assign({},r,{entry:n})]:[r],a},this.loadWithMV=function(){var e=Object(f.a)(p.a.mark((function e(n,a,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sendFilter(r,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.getDeviceConfig=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("devices"));case 1:case"end":return e.stop()}}),e)})))},m=n(207),v=n(209),g=n(30),x=n(197),w=n(198),A=n(212),S=n(118),y=n(47),T=n(147),E=n(148),I=n(113),C=n(101),k=n.n(C),P=n(72),N=n.n(P),G=n(9),L=Object(u.a)((function(e){return{noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},search:Object(g.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(G.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(G.c)(e.palette.common.white,.25)},marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(g.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),smallAvatar:{width:e.spacing(3),height:e.spacing(3)},advancedFilter:{marginLeft:"4px",marginRight:"0px"}}})),R=function(e){var t=e.txtFilter,n=e.setTxtFilter,r=e.showFilters,c=e.toggleShowFilters,s=L();return Object(a.jsx)(x.a,{position:"static",className:s.noLeftTop,children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(A.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:s.smallAvatar}),Object(a.jsx)(I.a,{className:s.title,variant:"h6",noWrap:!0,children:"ezbeq"}),Object(a.jsxs)("div",{className:s.search,children:[Object(a.jsx)("div",{className:s.searchIcon,children:Object(a.jsx)(k.a,{})}),Object(a.jsx)(S.a,{placeholder:"Search\u2026",classes:{root:s.inputRoot,input:s.inputInput},inputProps:{"aria-label":"search"},value:t,onChange:function(e){return n(e.target.value)},size:"small"})]}),Object(a.jsx)(y.a,{onClick:function(e){return n("")},children:Object(a.jsx)(N.a,{})}),Object(a.jsx)(T.a,{className:s.advancedFilter,control:Object(a.jsx)(E.a,{checked:r,onChange:c,size:"small"})})]})})},V=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:r=e.sent,t(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}(),M=n(199),z=Object(u.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),_=function(){var e=z(),t=Object(r.useState)({}),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)({}),u=Object(o.a)(i,2),l=u[0],d=u[1],j=function(e){return e.toString().padStart(2,"0")};if(Object(r.useEffect)((function(){V(s,O.getMeta)}),[]),Object(r.useEffect)((function(){V(d,O.getVersion)}),[]),c||l){var p=c&&c.version?c.version.substring(0,7):"";return Object(a.jsxs)(M.a,{container:!0,justify:"space-around",className:e.noLeft,children:[Object(a.jsx)(M.a,{item:!0,children:Object(a.jsx)(I.a,{variant:"caption",color:"textSecondary",children:c?"".concat(function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(j(t.getMonth()+1)).concat(j(t.getDate()),"_").concat(j(t.getHours())).concat(j(t.getMinutes())).concat(j(t.getSeconds()))}return"?"}(c.loaded)," / ").concat(p):""})}),Object(a.jsx)(M.a,{item:!0,children:Object(a.jsx)(I.a,{variant:"caption",color:"textSecondary",children:"UNKNOWN"!==l.version?"v".concat(l.version):l.version})})]})}return null},D=n(102),B=Object(u.a)((function(e){return{noLeft:{marginLeft:"0px"}}})),U=function(e,t){var n="";return e.length>1&&(n+=","),1===t.length?n+="".concat(t[0]):n+="".concat(t[0],"-").concat(t[t.length-1]),n},F=function(e){return"TV"===e.contentType?"".concat(e.title," ").concat(function(e){var t=e.hasOwnProperty("season")?"S".concat(e.season):"",n=e.hasOwnProperty("episodes")?e.episodes.split(","):"";if(n){if(n.length>1){for(var a="E",r=[],c=0;c<n.length;c++)0===r.length||r[r.length-1]===n[c]-1?r.push(parseInt(n[c])):(a+=U(a,r),r=[]);return r.length>0&&(a+=U(a,r)),"".concat(t).concat(a)}return"".concat(t,"E").concat(n)}return t}(e)):e.title},Q=function(e){var t=e.entries,n=e.setSelectedEntryId,r=e.selectedEntryId,c=e.useWide,s=B(),i=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.avsUrl,target:"_beq",children:F(e.row)}):F(e.row)}},{field:"audioTypes",headerName:"Audio Type",flex:.4},{field:"sortTitle",hide:!0},{field:"edition",headerName:"Edition",hide:!c}];if(t.length>0){var o=Object(a.jsx)(M.a,{item:!0,style:{height:"".concat(Math.max(260,(window.innerHeight-310)/(-1===r||c?1:2)),"px"),width:"100%"},children:Object(a.jsx)(D.a,{rows:t,columns:i,pageSize:50,density:"compact",sortModel:[{field:"sortTitle",sort:"asc"}],onRowSelected:function(e){return n(e.data.id)}})});return c?o:Object(a.jsx)(M.a,{container:!0,className:s.noLeft,children:o})}return null},K=n(20),Y=n(77),q=n(150),J=n(4),W=n(5),H=n(119),Z=n(202),X=n(65),$=n(152),ee=n(56),te=n(74),ne=n.n(te),ae=n(104),re=n.n(ae),ce=n(105),se=n.n(ce),ie=Object(u.a)((function(e){return{padTop:{paddingTop:e.spacing(1),width:"100%"},withoutLabel:{marginTop:e.spacing(1)},sized:{margin:e.spacing(.5),width:"22.5%"},zeroPad:{padding:0},tightPad:{paddingRight:0}}})),oe=Object(W.a)({root:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:"4px"}}})(H.a),ue=function(e){var t=e.fieldName,n=e.helpText,r=e.minGain,c=e.maxGain,s=e.step,i=e.dp,o=e.savedValues,u=e.values,l=e.setMV,d=e.setMute,j=ie(),p=1.1.toLocaleString().substring(1,2),f="."===p?/\./g:new RegExp(p,"g"),h=1/s,b=parseFloat(u.mv)!==parseFloat(o.mv)||u.mute!==o.mute,O=function(e,t){var n=Math.round(e*h)/h;l(n>c?c.toFixed(t):n<r?r.toFixed(t):n.toFixed(t))};return Object(a.jsx)(oe,{className:Object(J.a)(j.sized,j.withoutLabel,j.tightPad),variant:"outlined",id:t,value:u.mv,onChange:function(e){return function(e){if(e)if("-"===e)l(e);else if(0===c&&e.match("^[0-9]$"))l("-".concat(e));else{var t=(e.match(f)||[]).length;if(0===t){var n=parseFloat(e);isNaN(n)||O(n,0)}else if(1===t)if(e.charAt(e.length-1)===p)l(e);else{var a=parseFloat(e);if(!isNaN(a))if(i>1){var r=u.mv;Math.abs(a)<Math.abs(r)||e.length<r.toString().length?l(e):O(a,i)}else O(a,i)}}else l("")}(e.target.value)},"aria-describedby":"".concat(t,"-helper-text"),InputProps:{endAdornment:Object(a.jsx)(Z.a,{position:"end",children:Object(a.jsx)(y.a,{"aria-label":"mute channel",onClick:function(e){return d(!u.mute)},className:j.zeroPad,color:b?"secondary":"default",children:u.mute?Object(a.jsx)(re.a,{fontSize:"small"}):Object(a.jsx)(se.a,{fontSize:"small"})})})},inputProps:{"aria-label":t,pattern:"",inputMode:"numeric"},margin:"dense",size:"small",label:n})},le=function(e){var t=e.selectedSlotId,n=e.deviceGains,c=e.gains,s=e.setGains,i=e.sendGains,u=e.isActive,l=ie(),d=Object(r.useState)(!0),j=Object(o.a)(d,2),p=j[0],f=j[1];return Object(r.useEffect)((function(){f(isNaN(c.master_mv)||isNaN(c.inputOne_mv)||isNaN(c.inputTwo_mv))}),[c]),null!==t?Object(a.jsx)("div",{className:l.padTop,children:Object(a.jsx)(X.a,{component:"fieldset",children:Object(a.jsxs)($.a,{row:!0,children:[Object(a.jsx)(ue,{fieldName:"master-gain",helpText:"Master",minGain:-127,maxGain:0,step:.5,dp:1,savedValues:{mv:n.master_mv,mute:n.master_mute},values:{mv:c.master_mv,mute:c.master_mute},setMV:function(e){return s(Object(K.a)(Object(K.a)({},c),{master_mv:e}))},setMute:function(e){return s(Object(K.a)(Object(K.a)({},c),{master_mute:e}))}}),Object(a.jsx)(ue,{fieldName:"input1-gain",helpText:"Input 1",minGain:-72,maxGain:12,step:.25,dp:2,savedValues:{mv:n.inputOne_mv,mute:n.inputOne_mute},values:{mv:c.inputOne_mv,mute:c.inputOne_mute},setMV:function(e){return s(Object(K.a)(Object(K.a)({},c),{inputOne_mv:e}))},setMute:function(e){return s(Object(K.a)(Object(K.a)({},c),{inputOne_mute:e}))}}),Object(a.jsx)(ue,{fieldName:"input2-gain",helpText:"Input 2",minGain:-72,maxGain:12,step:.25,dp:2,savedValues:{mv:n.inputTwo_mv,mute:n.inputTwo_mute},values:{mv:c.inputTwo_mv,mute:c.inputTwo_mute},setMV:function(e){return s(Object(K.a)(Object(K.a)({},c),{inputTwo_mv:e}))},setMute:function(e){return s(Object(K.a)(Object(K.a)({},c),{inputTwo_mute:e}))}}),Object(a.jsx)(ee.a,{variant:"outlined",size:"small",color:"primary",className:l.sized,onClick:function(){return i(t,c)},disabled:p,startIcon:u()?Object(a.jsx)(q.a,{size:24}):Object(a.jsx)(ne.a,{fontSize:"small"}),children:"Apply"})]})})}):Object(a.jsx)("div",{})},de=Object(u.a)((function(e){return{root:{display:"flex",width:"100%"},container:{paddingLeft:4,paddingRight:4},fullWidth:{marginRight:0}}})),je=Object(u.a)((function(e){return{paper:function(t){return{margin:"".concat(e.spacing(.5),"px auto"),padding:e.spacing(.5),flexGrow:1,backgroundColor:t.selected?e.palette.action.selected:e.palette.background.default}},content:function(){return{padding:4,paddingLeft:8,"&:last-child":{paddingBottom:4}}}}})),pe=function(e,t,n){var a=e.find((function(e){return e.slotId===n&&e.action===t}));return a?a.state:-1},fe={master_mv:0,master_mute:!1,inputOne_mv:0,inputOne_mute:!1,inputTwo_mv:0,inputTwo_mute:!1},he=function(e){var t=e.selected,n=e.slot,r=e.onSelect,c=e.isPending,s=e.onClear,i=je({selected:t});return Object(a.jsx)(Y.a,{className:"".concat(i.paper),children:Object(a.jsxs)(M.a,{container:!0,wrap:"nowrap",justify:"space-between",alignItems:"center",children:[Object(a.jsx)(M.a,{item:!0,onClick:r,xs:8,className:"".concat(i.content),children:Object(a.jsxs)(I.a,{component:"p",variant:"body2",children:[n.id,": ",n.last]})}),Object(a.jsx)(M.a,{item:!0,xs:4,children:Object(a.jsx)(y.a,{onClick:s,disabled:c,children:c?Object(a.jsx)(q.a,{size:32}):Object(a.jsx)(N.a,{fontSize:"large"})})})]})})},be=function(e){var t=e.selectedSlotId,n=e.useWide,c=e.device,s=e.setDevice,i=e.setUserDriven,u=e.setError,l=de({selected:!1}),d=Object(r.useState)([]),j=Object(o.a)(d,2),h=j[0],b=j[1],m=Object(r.useState)(fe),v=Object(o.a)(m,2),g=v[0],x=v[1],w=Object(r.useState)({}),A=Object(o.a)(w,2),S=A[0],y=A[1];Object(r.useEffect)((function(){var e=Object(K.a)({},fe);if(e.master_mv=c.masterVolume,e.master_mute=c.mute,t&&c&&c.hasOwnProperty("slots")){var n=c.slots.find((function(e){return e.id===t}));n&&(e.inputOne_mute=n.mute1,e.inputTwo_mute=n.mute2,e.inputOne_mv=n.gain1,e.inputTwo_mv=n.gain2)}y(e),x(e)}),[c,t]);var T,E,I=function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){var r,c,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>3&&void 0!==i[3]?i[3]:null,b((function(e){return[{slotId:n,action:t,state:1}].concat(e)})),e.prev=2,e.next=5,a();case 5:c=e.sent,b((function(e){return e.filter((function(e){return!(e.slotId===n&&e.action===t)}))})),s(c),r&&r(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0),b((function(e){return e.map((function(e){return e.slotId===n&&e.action===t?{slotId:n,action:t,state:2}:e}))}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n,a){return e.apply(this,arguments)}}(),C=(T="slots"in c?c.slots:[],E=2,T.reduce((function(e,t,n){return(n%E?e[e.length-1].push(t):e.push([t]))&&e}),[])).map((function(e,n){return Object(a.jsx)(M.a,{container:!0,className:l.root,children:e.map((function(n,r){return Object(a.jsx)(M.a,{container:!0,item:!0,xs:1===e.length?12:6,className:l.container,children:Object(a.jsx)(he,{selected:n.id===t,slot:n,onSelect:function(){var e;n.hasOwnProperty("canActivate")&&n.canActivate&&(e=n.id,I("activate",e,(function(){return O.activateSlot(e)}),(function(){return i(!0)})))},onClear:function(){return e=n.id,void I("clear",e,(function(){return O.clearSlot(e)}));var e},isPending:(c=n.id,1===pe(h,"clear",c)||1===pe(h,"activate",c))})},r);var c}))},n)}));if(c&&c.hasOwnProperty("masterVolume")){var k=Object(a.jsx)(le,{selectedSlotId:t,deviceGains:S,gains:g,setGains:x,sendGains:function(e,t){I("gain",e,(function(){return O.setGains(e,t)}))},isActive:function(){return 1===pe(h,"gain",t)}});return n?Object(a.jsxs)("div",{className:l.fullWidth,children:[C,Object(a.jsx)(M.a,{container:!0,children:k})]}):Object(a.jsxs)("div",{className:l.fullWidth,children:[Object(a.jsx)(M.a,{container:!0,direction:"column",children:C}),Object(a.jsx)(M.a,{container:!0,direction:"column",children:k})]})}return n?Object(a.jsx)(M.a,{container:!0,children:C}):Object(a.jsx)(M.a,{container:!0,direction:"column",children:C})},Oe=n(21),me=n(210),ve=n(106),ge=n.n(ve),xe=n(107),we=n.n(xe),Ae=n(117),Se=function(e){var t=e.items,n=e.selectedValues,r=e.label,c=e.placeholder,s=void 0===c?"":c,i=e.noOptionsText,o=e.limitTags,u=e.onToggleOption,l=e.onCreateOption,d=e.onClearOptions,j=e.getOptionLabel,p=void 0===j?function(e){return e}:j,f=e.isInView,h=void 0===f?function(e){return!0}:f;return Object(a.jsx)(me.a,{multiple:!0,size:"small",disableCloseOnSelect:!0,freeSolo:"undefined"!==typeof d,selectOnFocus:!0,handleHomeEndKeys:!0,limitTags:o,options:t,value:n,noOptionsText:i,onChange:function(e,t,n){"select-option"===n||"remove-option"===n?u&&u(t):"clear"===n?d&&d():"create-option"===n?l&&l(t):console.log("Event: ".concat(e," Value: ").concat(t," Reason: ").concat(n))},renderOption:function(e,t){var n,r=t.selected;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ae.a,{color:"primary",icon:Object(a.jsx)(ge.a,{fontSize:"small"}),checkedIcon:Object(a.jsx)(we.a,{fontSize:"small"}),style:{marginRight:8},checked:r}),Object(a.jsx)("div",{style:(n=e,{textDecoration:h(n)?"none":"line-through"}),children:p(e)})]})},renderInput:function(e){return Object(a.jsx)(H.a,Object(K.a)(Object(K.a)({},e),{},{label:r,placeholder:s}))},getOptionLabel:p})};Se.defaultProps={limitTags:5,items:[],selectedValues:[]};var ye=Se,Te=function(e){var t=e.visible,n=e.selectedAudioTypes,c=e.setSelectedAudioTypes,s=e.selectedYears,i=e.setSelectedYears,u=e.selectedAuthors,l=e.setSelectedAuthors,d=e.selectedContentTypes,j=e.setSelectedContentTypes,p=e.filteredEntries,f=e.setError,h=Object(r.useState)([]),b=Object(o.a)(h,2),m=b[0],v=b[1],g=Object(r.useState)([]),x=Object(o.a)(g,2),w=x[0],A=x[1],S=Object(r.useState)([]),y=Object(o.a)(S,2),T=y[0],E=y[1],I=Object(r.useState)([]),C=Object(o.a)(I,2),k=C[0],P=C[1],N=Object(r.useState)([]),G=Object(o.a)(N,2),L=G[0],R=G[1],M=Object(r.useState)([]),z=Object(o.a)(M,2),_=z[0],D=z[1];Object(r.useEffect)((function(){V(v,O.getAuthors,f)}),[f]),Object(r.useEffect)((function(){V(A,O.getYears,f)}),[f]),Object(r.useEffect)((function(){V(E,O.getAudioTypes,f)}),[f]),Object(r.useEffect)((function(){V(P,O.getContentTypes,f)}),[f]),Object(r.useEffect)((function(){V(R,(function(){return Object(Oe.a)(new Set(p.map((function(e){return e.year}))))}),f),V(D,(function(){return Object(Oe.a)(new Set(p.map((function(e){return e.audioTypes})).flat()))}),f)}),[p,f]);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ye,{items:k,selectedValues:d,label:"Content Types",onToggleOption:function(e){return j(e)},onClearOptions:function(){return j([])}}),Object(a.jsx)(ye,{items:m,selectedValues:u,label:"Author",onToggleOption:function(e){return l(e)},onClearOptions:function(){return l([])}}),Object(a.jsx)(ye,{items:w,selectedValues:s,label:"Year",onToggleOption:function(e){return i(e)},onCreateOption:function(e){return function(e){var t=w.filter((function(t){return e.some((function(e){return e===t||"".concat(t).indexOf(e)>-1}))}));i(t)}(e)},onClearOptions:function(){return i([])},getOptionLabel:function(e){return"".concat(e)},isInView:function(e){return 0===L.length||L.indexOf(e)>-1}}),Object(a.jsx)(ye,{items:T,selectedValues:n,label:"Audio Types",onToggleOption:function(e){return c(e)},onCreateOption:function(e){return function(e){var t=T.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));c(t)}(e)},onClearOptions:function(){return c([])},isInView:function(e){return 0===_.length||_.indexOf(e)>-1}})]}):null},Ee=n(211),Ie=n(203),Ce=n(204),ke=n(205),Pe=n(206),Ne=Object(u.a)({root:{}}),Ge=function(e){var t=[];return e.rating&&t.push(e.rating),e.runtime&&t.push("".concat(Math.floor(e.runtime/60),"h ").concat(e.runtime%60,"m")),e.language&&"English"!==e.language&&t.push(e.language),e.genres&&t.push(e.genres.join(", ")),t.push(e.author),t||e.overview?Object(a.jsxs)(a.Fragment,{children:[t?Object(a.jsx)(I.a,{variant:"body1",component:"p",children:t.join(" \u2022 ")}):null,e.overview?Object(a.jsx)(I.a,{variant:"body2",component:"p",children:e.overview}):null]}):null},Le=function(e){return e&&e.audioTypes?e.audioTypes.map((function(e){return Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e]},e)})):null},Re=function(e){return e&&e.mvAdjust?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),"MV Adjustment: ",e.mvAdjust>0?"+":"",e.mvAdjust," dB"]}):null},Ve=function(e){return e&&e.note?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),e.note]}):null},Me=function(e){return e&&e.warning?Object(a.jsxs)("span",{children:[Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Warning:"})," ",e.warning]}):null},ze=function(e){var t=e.setSelectedSlot,n=e.slotIds,r=e.selectedSlot,c=e.sendGain,s=e.selectedEntry,i=e.setSendGain,o=e.device,u=e.pending,l=e.upload,d=n.map((function(e){return Object(a.jsx)(T.a,{value:e,control:Object(a.jsx)(Ee.a,{checked:r===e,color:"primary"}),label:e},e)})),j=n.length>1?Object(a.jsx)(Ie.a,{row:!0,"aria-label":"slot",name:"slot",onChange:function(e){return t(e.target.value)},children:d}):null,p=o&&"minidsp"===o.deviceType?Object(a.jsx)(T.a,{control:Object(a.jsx)(Ae.a,{checked:c,name:"sendMV",color:"primary",disabled:!s.mvAdjust,onChange:function(e){return i(e.target.checked)}}),label:"Set Input Gain"}):null;return Object(a.jsxs)($.a,{row:!0,children:[j,p,Object(a.jsx)(ee.a,{variant:"contained",startIcon:u?Object(a.jsx)(q.a,{size:24}):Object(a.jsx)(ne.a,{fontSize:"small"}),onClick:l,children:"Upload"})]})},_e=function(e){var t=e.selectedEntry,n=e.useWide,c=e.setDevice,s=e.selectedSlotId,i=e.device,u=e.setError,l=Ne(),d=Object(r.useState)(null),j=Object(o.a)(d,2),h=j[0],b=j[1],m=Object(r.useState)(!1),v=Object(o.a)(m,2),g=v[0],x=v[1],w=Object(r.useState)(!1),A=Object(o.a)(w,2),S=A[0],y=A[1],T=i&&i.hasOwnProperty("slots")?i.slots.map((function(e){return e.id})):[];Object(r.useEffect)((function(){x(!1)}),[t]),Object(r.useEffect)((function(){b(s)}),[s]);var E,C=function(){var e=Object(f.a)(p.a.mark((function e(){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={inputOne_mv:g?t.mvAdjust:0,inputOne_mute:!1,inputTwo_mv:g?t.mvAdjust:0,inputTwo_mute:!1},y(!0),e.prev=2,e.next=5,O.loadWithMV(h,n,t.id);case 5:a=e.sent,y(!1),c(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),u(e.t0),y(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();if(t){var k=t.images?t.images.map((function(e,n){return Object(a.jsx)(Ce.a,{component:"img",className:l.media,image:e,title:"img".concat(n),alt:"".concat(t.title," - ").concat(n)},"img".concat(n))})):null,P=Object(a.jsxs)(ke.a,{children:[Object(a.jsxs)(I.a,{gutterBottom:!0,variant:"h5",component:"h3",children:[t.title,t.year?" (".concat(t.year,")"):""]}),t.edition?Object(a.jsx)(I.a,{variant:"h6",component:"p",children:t.edition}):null,t.altTitle&&t.altTitle!==t.title?Object(a.jsx)(I.a,{variant:"h6",component:"p",children:t.altTitle}):null,Ge(t),Object(a.jsx)("br",{}),Object(a.jsxs)(I.a,{variant:"body2",color:"textSecondary",component:"p",children:[(E=t,E&&E.season?E.episodes?/^\d+$/.test(E.episodes)?"S".concat(E.season," E").concat(E.episodes):"S".concat(E.season," ").concat(E.episodes):"S".concat(E.season):null),Le(t),Re(t),Ve(t),Me(t)]})]}),N=Object(a.jsx)(ke.a,{children:Object(a.jsx)(ze,{setSelectedSlot:b,selectedSlot:h,sendGain:g,slotIds:T,selectedEntry:t,setSendGain:x,pending:S,device:i,upload:C})}),G=Object(a.jsxs)($.a,{row:!0,children:[t.theMovieDB?Object(a.jsx)(ee.a,{size:"small",color:"primary",href:"https://themoviedb.org/movie/".concat(t.theMovieDB),target:"_avs",children:"TMDb"}):null,t.avsUrl?Object(a.jsx)(ee.a,{size:"small",color:"primary",href:t.avsUrl,target:"_avs",children:"Discuss"}):null,t.beqcUrl?Object(a.jsx)(ee.a,{size:"small",color:"primary",href:t.beqcUrl,target:"_beq",children:"Catalogue"}):null]});return n?Object(a.jsxs)(Pe.a,{className:l.root,children:[P,N,G,k]}):Object(a.jsxs)(Pe.a,{className:l.root,children:[N,P,G,k]})}return null},De=n(214),Be=n(108),Ue=n.n(Be),Fe=function(e){var t=e.err,n=e.setErr,c=Object(r.useState)(null),s=Object(o.a)(c,2),i=s[0],u=s[1];Object(r.useEffect)((function(){t?(console.error(t),u(t.message)):u(null)}),[t,u]);var l=function(e,t){n(null)};return Object(a.jsx)(De.a,{open:null!==i,autoHideDuration:1e4,onClose:l,message:t?t.message:null,action:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(y.a,{size:"small","aria-label":"close",color:"inherit",onClick:l,children:Object(a.jsx)(Ue.a,{fontSize:"small"})})})})},Qe=Object(u.a)((function(e){return{root:{flexGrow:1,width:"100vw",height:"100vh","& > *":{margin:e.spacing(1)}}}})),Ke=function(){var e=Object(m.a)("(prefers-color-scheme: dark)"),t=c.a.useMemo((function(){return Object(l.a)({palette:{type:e?"dark":"light"}})}),[e]),n=Qe(),s=Object(r.useState)(null),i=Object(o.a)(s,2),u=i[0],j=i[1],p=Object(r.useState)([]),f=Object(o.a)(p,2),h=f[0],b=f[1],g=Object(r.useState)([]),x=Object(o.a)(g,2),w=x[0],A=x[1],S=Object(r.useState)({}),y=Object(o.a)(S,2),T=y[0],E=y[1],I=Object(r.useState)([]),C=Object(o.a)(I,2),k=C[0],P=C[1],N=Object(r.useState)([]),G=Object(o.a)(N,2),L=G[0],z=G[1],D=Object(r.useState)([]),B=Object(o.a)(D,2),U=B[0],F=B[1],K=Object(r.useState)([]),Y=Object(o.a)(K,2),q=Y[0],J=Y[1],W=Object(r.useState)(""),H=Object(o.a)(W,2),Z=H[0],X=H[1],$=Object(r.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(r.useState)(-1),re=Object(o.a)(ae,2),ce=re[0],se=re[1],ie=Object(r.useState)(null),oe=Object(o.a)(ie,2),ue=oe[0],le=oe[1],de=Object(r.useState)(!1),je=Object(o.a)(de,2),pe=je[0],fe=je[1];Object(r.useEffect)((function(){if(T&&T.hasOwnProperty("slots")){var e=T.slots.find((function(e){return!0===e.active}));e&&le(e.id)}}),[T]),Object(r.useEffect)((function(){V(b,O.load,j)}),[]),Object(r.useEffect)((function(){V(E,O.getDeviceConfig,j)}),[]),Object(r.useEffect)((function(){var e=function(e){return!(k.length&&!(k.indexOf(e.author)>-1)||L.length&&!(L.indexOf(e.year)>-1)||U.length&&!e.audioTypes.some((function(e){return U.indexOf(e)>-1}))||q.length&&!(q.indexOf(e.contentType)>-1)||Z&&!function(e){var t=Z.toLowerCase();return!!e.title.toLowerCase().includes(t)||!(!e.hasOwnProperty("altTitle")||!e.altTitle.toLowerCase().includes(t))}(e))};V(A,(function(){return h.filter(e)}),j)}),[h,U,L,k,q,Z]),Object(r.useEffect)((function(){if(pe&&T&&T.hasOwnProperty("slots")){var e=T.slots.find((function(e){return e.id===ue}));e&&e.last&&"ERROR"!==e.last&&"Empty"!==e.last&&X(e.last)}}),[T,ue,X,pe]);var he=Object(m.a)("(orientation: landscape) and (min-height: 580px)"),Oe=Object(a.jsx)(be,{selectedEntryId:ce,selectedSlotId:ue,useWide:he,setSelectedSlotId:le,setUserDriven:fe,device:T,setDevice:E,setError:j}),me=Object(a.jsx)(Q,{entries:w,setSelectedEntryId:se,selectedEntryId:ce,useWide:he}),ve=Object(a.jsx)(_e,{selectedEntry:ce?h.find((function(e){return e.id===ce})):null,useWide:he,setDevice:E,selectedSlotId:ue,device:T,setError:j});return Object(a.jsxs)(d.a,{theme:t,children:[Object(a.jsx)(v.a,{}),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(Fe,{err:u,setErr:j}),Object(a.jsx)(R,{txtFilter:Z,setTxtFilter:X,showFilters:te,toggleShowFilters:function(){ne((function(e){return!e}))}}),Object(a.jsx)(Te,{visible:te,selectedAudioTypes:U,setSelectedAudioTypes:F,selectedYears:L,setSelectedYears:z,selectedAuthors:k,setSelectedAuthors:P,selectedContentTypes:q,setSelectedContentTypes:J,filteredEntries:w,setError:j}),he?Object(a.jsxs)(M.a,{container:!0,children:[Object(a.jsxs)(M.a,{item:!0,xs:6,md:6,children:[Oe,Object(a.jsx)(M.a,{container:!0,children:me})]}),Object(a.jsx)(M.a,{item:!0,xs:6,md:6,children:ve})]}):Object(a.jsxs)(a.Fragment,{children:[Oe,me,ve]}),Object(a.jsx)(_,{})]})]})};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Ke,{})}),document.getElementById("root"))}},[[144,1,2]]]);
//# sourceMappingURL=main.c54d1998.chunk.js.map