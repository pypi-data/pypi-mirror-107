showMessage('Loading',staticTemplates.loadingModal);
function runGeeViz(){
Map2.addSerializedLayer({"result": "0", "values": {"1": {"functionInvocationValue": {"functionName": "Image.updateMask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}, "mask": {"functionInvocationValue": {"functionName": "Image.reduce", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.mask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.min", "arguments": {}}}}}}}}}, "3": {"constantValue": "system:time_start"}, "7": {"constantValue": "date-orbit"}, "8": {"functionInvocationValue": {"functionName": "Date.format", "arguments": {"date": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "3"}}}}}}}, "format": {"constantValue": "YYYY-MM-dd"}}}}, "9": {"constantValue": "_"}, "10": {"constantValue": "SENSING_ORBIT_NUMBER"}, "6": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "date"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"argumentReference": "_MAPPING_VAR_0_0"}, "value": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"valueReference": "8"}, "string2": {"valueReference": "9"}}}}, "string2": {"functionInvocationValue": {"functionName": "Number.format", "arguments": {"number": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "10"}}}}}}}}}}}}}, "value": {"valueReference": "8"}}}}, "11": {"functionInvocationValue": {"functionName": "Image.reduceResolution", "arguments": {"bestEffort": {"constantValue": true}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}, "maxPixels": {"constantValue": 64}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.mean", "arguments": {}}}}}}, "12": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "primary"}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "secondary"}}}}}}}, "13": {"constantValue": "system:index"}, "15": {"constantValue": "QA60"}, "16": {"constantValue": "B1"}, "17": {"constantValue": "B2"}, "18": {"constantValue": "B3"}, "19": {"constantValue": "B4"}, "20": {"constantValue": "B5"}, "21": {"constantValue": "B6"}, "22": {"constantValue": "B7"}, "23": {"constantValue": "B8"}, "24": {"constantValue": "B8A"}, "25": {"constantValue": "B9"}, "26": {"constantValue": "B10"}, "27": {"constantValue": "B11"}, "28": {"constantValue": "B12"}, "14": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "15"}, {"valueReference": "16"}, {"valueReference": "17"}, {"valueReference": "18"}, {"valueReference": "19"}, {"valueReference": "20"}, {"valueReference": "21"}, {"valueReference": "22"}, {"valueReference": "23"}, {"valueReference": "24"}, {"valueReference": "25"}, {"valueReference": "26"}, {"valueReference": "27"}, {"valueReference": "28"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"arrayValue": {"values": [{"valueReference": "15"}, {"constantValue": "cb"}, {"constantValue": "blue"}, {"constantValue": "green"}, {"constantValue": "red"}, {"constantValue": "re1"}, {"constantValue": "re2"}, {"constantValue": "re3"}, {"constantValue": "nir"}, {"constantValue": "nir2"}, {"constantValue": "waterVapor"}, {"constantValue": "cirrus"}, {"constantValue": "swir1"}, {"constantValue": "swir2"}]}}}}}, "29": {"functionInvocationValue": {"functionName": "Element.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Image.divide", "arguments": {"image1": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "16"}, {"valueReference": "17"}, {"valueReference": "18"}, {"valueReference": "19"}, {"valueReference": "20"}, {"valueReference": "21"}, {"valueReference": "22"}, {"valueReference": "23"}, {"valueReference": "24"}, {"valueReference": "25"}, {"valueReference": "26"}, {"valueReference": "27"}, {"valueReference": "28"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "image2": {"functionInvocationValue": {"functionName": "Image.constant", "arguments": {"value": {"constantValue": 10000}}}}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "15"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}}}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "properties": {"arrayValue": {"values": [{"valueReference": "3"}]}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "31": {"constantValue": "2019-08-19"}, "32": {"constantValue": "2019-08-15"}, "30": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "31"}, "start": {"valueReference": "32"}}}}, "rightField": {"valueReference": "3"}}}}, "33": {"functionInvocationValue": {"functionName": "Filter.calendarRange", "arguments": {"end": {"constantValue": 365}, "start": {"constantValue": 1}}}}, "34": {"functionInvocationValue": {"functionName": "Filter.intersects", "arguments": {"leftField": {"constantValue": ".all"}, "rightValue": {"functionInvocationValue": {"functionName": "Feature", "arguments": {"geometry": {"functionInvocationValue": {"functionName": "GeometryConstructors.Polygon", "arguments": {"coordinates": {"constantValue": [[[-122.53855824372827, 40.73858717935079], [-122.53855824372827, 38.67657688216227], [-117.26512074372827, 38.67657688216227], [-117.26512074372827, 40.73858717935079]]]}, "geodesic": {"constantValue": false}}}}}}}}}}, "35": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"constantValue": ["probability"]}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"constantValue": ["cloud_probability"]}}}}, "5": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "6"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "11"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "12"}}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "13"}, "rightField": {"valueReference": "13"}}}}, "join": {"functionInvocationValue": {"functionName": "Join.inner", "arguments": {}}}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "14"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "29"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2"}}}}, "filter": {"valueReference": "30"}}}}, "filter": {"valueReference": "33"}}}}, "filter": {"valueReference": "34"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "35"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2_CLOUD_PROBABILITY"}}}}, "filter": {"valueReference": "30"}}}}, "filter": {"valueReference": "33"}}}}, "filter": {"valueReference": "34"}}}}}}}}}}}}}}}}}}}, "37": {"functionInvocationValue": {"functionName": "String.split", "arguments": {"regex": {"valueReference": "9"}, "string": {"argumentReference": "_MAPPING_VAR_6_0"}}}}, "36": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"valueReference": "37"}}}}}}}, "4": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "5"}, "filter": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"functionInvocationValue": {"functionName": "Date.advance", "arguments": {"date": {"valueReference": "36"}, "delta": {"constantValue": 1}, "unit": {"constantValue": "day"}}}}, "start": {"valueReference": "36"}}}}, "rightField": {"valueReference": "3"}}}}}}}, "filter": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "10"}, "rightValue": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 1}, "list": {"valueReference": "37"}}}}}}}}}}}}}, "2": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "3"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "4"}}}}, "value": {"functionInvocationValue": {"functionName": "Date.millis", "arguments": {"date": {"valueReference": "36"}}}}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "4"}}}}}}}, "38": {"constantValue": "True"}, "0": {"functionInvocationValue": {"functionName": "Image.reproject", "arguments": {"crs": {"functionInvocationValue": {"functionName": "Projection", "arguments": {"crs": {"constantValue": "EPSG:5070"}, "transform": {"constantValue": [10, 0, -2361915.0, 0, -10, 3177735.0]}}}}, "image": {"functionInvocationValue": {"functionName": "reduce.median", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "toaOrSR"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "resampleMethod"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "addCloudProbability"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "convertToDailyMosaics"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "endJulian"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "startJulian"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "endDate"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "startDate"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "1"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "2"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "5"}, "property": {"valueReference": "7"}}}}}}}}}}}}}}}}, "value": {"valueReference": "32"}}}}, "value": {"valueReference": "31"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "38"}}}}, "value": {"valueReference": "38"}}}}, "value": {"constantValue": "aggregate"}}}}, "value": {"constantValue": "TOA"}}}}}}}}}}}},{"min": 0.1, "max": [0.5, 0.6, 0.6], "bands": "swir2,nir,red", "gamma": 1.6},'preComposite Raw',false);
Map2.addSerializedLayer({"result": "0", "values": {"1": {"functionInvocationValue": {"functionName": "Image.updateMask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}, "mask": {"functionInvocationValue": {"functionName": "Image.reduce", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.mask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.min", "arguments": {}}}}}}}}}, "3": {"constantValue": "system:time_start"}, "7": {"constantValue": "date-orbit"}, "8": {"functionInvocationValue": {"functionName": "Date.format", "arguments": {"date": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "3"}}}}}}}, "format": {"constantValue": "YYYY-MM-dd"}}}}, "9": {"constantValue": "_"}, "10": {"constantValue": "SENSING_ORBIT_NUMBER"}, "6": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "date"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"argumentReference": "_MAPPING_VAR_0_0"}, "value": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"valueReference": "8"}, "string2": {"valueReference": "9"}}}}, "string2": {"functionInvocationValue": {"functionName": "Number.format", "arguments": {"number": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "10"}}}}}}}}}}}}}, "value": {"valueReference": "8"}}}}, "11": {"functionInvocationValue": {"functionName": "Image.reduceResolution", "arguments": {"bestEffort": {"constantValue": true}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}, "maxPixels": {"constantValue": 64}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.mean", "arguments": {}}}}}}, "12": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "primary"}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "secondary"}}}}}}}, "13": {"constantValue": "system:index"}, "15": {"constantValue": "QA60"}, "16": {"constantValue": "B1"}, "17": {"constantValue": "B2"}, "18": {"constantValue": "B3"}, "19": {"constantValue": "B4"}, "20": {"constantValue": "B5"}, "21": {"constantValue": "B6"}, "22": {"constantValue": "B7"}, "23": {"constantValue": "B8"}, "24": {"constantValue": "B8A"}, "25": {"constantValue": "B9"}, "26": {"constantValue": "B10"}, "27": {"constantValue": "B11"}, "28": {"constantValue": "B12"}, "14": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "15"}, {"valueReference": "16"}, {"valueReference": "17"}, {"valueReference": "18"}, {"valueReference": "19"}, {"valueReference": "20"}, {"valueReference": "21"}, {"valueReference": "22"}, {"valueReference": "23"}, {"valueReference": "24"}, {"valueReference": "25"}, {"valueReference": "26"}, {"valueReference": "27"}, {"valueReference": "28"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"arrayValue": {"values": [{"valueReference": "15"}, {"constantValue": "cb"}, {"constantValue": "blue"}, {"constantValue": "green"}, {"constantValue": "red"}, {"constantValue": "re1"}, {"constantValue": "re2"}, {"constantValue": "re3"}, {"constantValue": "nir"}, {"constantValue": "nir2"}, {"constantValue": "waterVapor"}, {"constantValue": "cirrus"}, {"constantValue": "swir1"}, {"constantValue": "swir2"}]}}}}}, "29": {"functionInvocationValue": {"functionName": "Element.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Image.divide", "arguments": {"image1": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "16"}, {"valueReference": "17"}, {"valueReference": "18"}, {"valueReference": "19"}, {"valueReference": "20"}, {"valueReference": "21"}, {"valueReference": "22"}, {"valueReference": "23"}, {"valueReference": "24"}, {"valueReference": "25"}, {"valueReference": "26"}, {"valueReference": "27"}, {"valueReference": "28"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "image2": {"functionInvocationValue": {"functionName": "Image.constant", "arguments": {"value": {"constantValue": 10000}}}}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "15"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}}}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "properties": {"arrayValue": {"values": [{"valueReference": "3"}]}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "31": {"constantValue": "2020-08-19"}, "32": {"constantValue": "2020-08-15"}, "30": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "31"}, "start": {"valueReference": "32"}}}}, "rightField": {"valueReference": "3"}}}}, "33": {"functionInvocationValue": {"functionName": "Filter.calendarRange", "arguments": {"end": {"constantValue": 365}, "start": {"constantValue": 1}}}}, "34": {"functionInvocationValue": {"functionName": "Filter.intersects", "arguments": {"leftField": {"constantValue": ".all"}, "rightValue": {"functionInvocationValue": {"functionName": "Feature", "arguments": {"geometry": {"functionInvocationValue": {"functionName": "GeometryConstructors.Polygon", "arguments": {"coordinates": {"constantValue": [[[-122.53855824372827, 40.73858717935079], [-122.53855824372827, 38.67657688216227], [-117.26512074372827, 38.67657688216227], [-117.26512074372827, 40.73858717935079]]]}, "geodesic": {"constantValue": false}}}}}}}}}}, "35": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"constantValue": ["probability"]}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"constantValue": ["cloud_probability"]}}}}, "5": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "6"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "11"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "12"}}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "13"}, "rightField": {"valueReference": "13"}}}}, "join": {"functionInvocationValue": {"functionName": "Join.inner", "arguments": {}}}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "14"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "29"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2"}}}}, "filter": {"valueReference": "30"}}}}, "filter": {"valueReference": "33"}}}}, "filter": {"valueReference": "34"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "35"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2_CLOUD_PROBABILITY"}}}}, "filter": {"valueReference": "30"}}}}, "filter": {"valueReference": "33"}}}}, "filter": {"valueReference": "34"}}}}}}}}}}}}}}}}}}}, "37": {"functionInvocationValue": {"functionName": "String.split", "arguments": {"regex": {"valueReference": "9"}, "string": {"argumentReference": "_MAPPING_VAR_6_0"}}}}, "36": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"valueReference": "37"}}}}}}}, "4": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "5"}, "filter": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"functionInvocationValue": {"functionName": "Date.advance", "arguments": {"date": {"valueReference": "36"}, "delta": {"constantValue": 1}, "unit": {"constantValue": "day"}}}}, "start": {"valueReference": "36"}}}}, "rightField": {"valueReference": "3"}}}}}}}, "filter": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "10"}, "rightValue": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 1}, "list": {"valueReference": "37"}}}}}}}}}}}}}, "2": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "3"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "4"}}}}, "value": {"functionInvocationValue": {"functionName": "Date.millis", "arguments": {"date": {"valueReference": "36"}}}}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "4"}}}}}}}, "38": {"constantValue": "True"}, "0": {"functionInvocationValue": {"functionName": "Image.reproject", "arguments": {"crs": {"functionInvocationValue": {"functionName": "Projection", "arguments": {"crs": {"constantValue": "EPSG:5070"}, "transform": {"constantValue": [10, 0, -2361915.0, 0, -10, 3177735.0]}}}}, "image": {"functionInvocationValue": {"functionName": "reduce.median", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "toaOrSR"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "resampleMethod"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "addCloudProbability"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "convertToDailyMosaics"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "endJulian"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "startJulian"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "endDate"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "startDate"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "1"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "2"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "5"}, "property": {"valueReference": "7"}}}}}}}}}}}}}}}}, "value": {"valueReference": "32"}}}}, "value": {"valueReference": "31"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "38"}}}}, "value": {"valueReference": "38"}}}}, "value": {"constantValue": "aggregate"}}}}, "value": {"constantValue": "TOA"}}}}}}}}}}}},{"min": 0.1, "max": [0.5, 0.6, 0.6], "bands": "swir2,nir,red", "gamma": 1.6},'postComposite Raw',false);
Map2.addSerializedLayer({"result": "0", "values": {"4": {"functionInvocationValue": {"functionName": "Image.reproject", "arguments": {"crs": {"functionInvocationValue": {"functionName": "Projection", "arguments": {"crs": {"constantValue": "EPSG:5070"}, "transform": {"constantValue": [10, 0, -2361915.0, 0, -10, 3177735.0]}}}}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "6": {"functionInvocationValue": {"functionName": "GeometryConstructors.Polygon", "arguments": {"coordinates": {"constantValue": [[[-122.53855824372827, 40.73858717935079], [-122.53855824372827, 38.67657688216227], [-117.26512074372827, 38.67657688216227], [-117.26512074372827, 40.73858717935079]]]}, "geodesic": {"constantValue": false}}}}, "5": {"functionInvocationValue": {"functionName": "Image.clip", "arguments": {"geometry": {"valueReference": "6"}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "7": {"constantValue": "toaOrSR"}, "8": {"constantValue": "resampleMethod"}, "9": {"constantValue": "addCloudProbability"}, "10": {"constantValue": "convertToDailyMosaics"}, "11": {"constantValue": "endJulian"}, "12": {"constantValue": "startJulian"}, "13": {"constantValue": "endDate"}, "14": {"constantValue": "startDate"}, "16": {"functionInvocationValue": {"functionName": "Image.updateMask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}, "mask": {"functionInvocationValue": {"functionName": "Image.reduce", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.mask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.min", "arguments": {}}}}}}}}}, "15": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "16"}}, "18": {"constantValue": "system:time_start"}, "23": {"constantValue": "date-orbit"}, "24": {"functionInvocationValue": {"functionName": "Date.format", "arguments": {"date": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "18"}}}}}}}, "format": {"constantValue": "YYYY-MM-dd"}}}}, "25": {"constantValue": "_"}, "26": {"constantValue": "SENSING_ORBIT_NUMBER"}, "22": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "date"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "23"}, "object": {"argumentReference": "_MAPPING_VAR_0_0"}, "value": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"valueReference": "24"}, "string2": {"valueReference": "25"}}}}, "string2": {"functionInvocationValue": {"functionName": "Number.format", "arguments": {"number": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "26"}}}}}}}}}}}}}, "value": {"valueReference": "24"}}}}, "21": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "22"}}, "28": {"functionInvocationValue": {"functionName": "Image.reduceResolution", "arguments": {"bestEffort": {"constantValue": true}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}, "maxPixels": {"constantValue": 64}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.mean", "arguments": {}}}}}}, "27": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "28"}}, "30": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "primary"}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "secondary"}}}}}}}, "29": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "30"}}, "32": {"constantValue": "system:index"}, "31": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "32"}, "rightField": {"valueReference": "32"}}}}, "33": {"functionInvocationValue": {"functionName": "Join.inner", "arguments": {}}}, "36": {"constantValue": "QA60"}, "37": {"constantValue": "B1"}, "38": {"constantValue": "B2"}, "39": {"constantValue": "B3"}, "40": {"constantValue": "B4"}, "41": {"constantValue": "B5"}, "42": {"constantValue": "B6"}, "43": {"constantValue": "B7"}, "44": {"constantValue": "B8"}, "45": {"constantValue": "B8A"}, "46": {"constantValue": "B9"}, "47": {"constantValue": "B10"}, "48": {"constantValue": "B11"}, "49": {"constantValue": "B12"}, "50": {"constantValue": "nir"}, "35": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "36"}, {"valueReference": "37"}, {"valueReference": "38"}, {"valueReference": "39"}, {"valueReference": "40"}, {"valueReference": "41"}, {"valueReference": "42"}, {"valueReference": "43"}, {"valueReference": "44"}, {"valueReference": "45"}, {"valueReference": "46"}, {"valueReference": "47"}, {"valueReference": "48"}, {"valueReference": "49"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"arrayValue": {"values": [{"valueReference": "36"}, {"constantValue": "cb"}, {"constantValue": "blue"}, {"constantValue": "green"}, {"constantValue": "red"}, {"constantValue": "re1"}, {"constantValue": "re2"}, {"constantValue": "re3"}, {"valueReference": "50"}, {"constantValue": "nir2"}, {"constantValue": "waterVapor"}, {"constantValue": "cirrus"}, {"constantValue": "swir1"}, {"constantValue": "swir2"}]}}}}}, "34": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "35"}}, "52": {"functionInvocationValue": {"functionName": "Element.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Image.divide", "arguments": {"image1": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "37"}, {"valueReference": "38"}, {"valueReference": "39"}, {"valueReference": "40"}, {"valueReference": "41"}, {"valueReference": "42"}, {"valueReference": "43"}, {"valueReference": "44"}, {"valueReference": "45"}, {"valueReference": "46"}, {"valueReference": "47"}, {"valueReference": "48"}, {"valueReference": "49"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "image2": {"functionInvocationValue": {"functionName": "Image.constant", "arguments": {"value": {"constantValue": 10000}}}}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "36"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}}}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "properties": {"arrayValue": {"values": [{"valueReference": "18"}]}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "51": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "52"}}, "53": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2"}}}}, "55": {"constantValue": "2019-08-19"}, "56": {"constantValue": "2019-08-15"}, "54": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "55"}, "start": {"valueReference": "56"}}}}, "rightField": {"valueReference": "18"}}}}, "57": {"functionInvocationValue": {"functionName": "Filter.calendarRange", "arguments": {"end": {"constantValue": 365}, "start": {"constantValue": 1}}}}, "58": {"functionInvocationValue": {"functionName": "Filter.intersects", "arguments": {"leftField": {"constantValue": ".all"}, "rightValue": {"functionInvocationValue": {"functionName": "Feature", "arguments": {"geometry": {"valueReference": "6"}}}}}}}, "60": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"constantValue": ["probability"]}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"constantValue": ["cloud_probability"]}}}}, "59": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "60"}}, "61": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2_CLOUD_PROBABILITY"}}}}, "20": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "21"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "27"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "29"}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"valueReference": "31"}, "join": {"valueReference": "33"}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "34"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "51"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "53"}, "filter": {"valueReference": "54"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "59"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "61"}, "filter": {"valueReference": "54"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}}}}}}}}}}, "64": {"functionInvocationValue": {"functionName": "String.split", "arguments": {"regex": {"valueReference": "25"}, "string": {"argumentReference": "_MAPPING_VAR_6_0"}}}}, "63": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"valueReference": "64"}}}}}}}, "62": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"functionInvocationValue": {"functionName": "Date.advance", "arguments": {"date": {"valueReference": "63"}, "delta": {"constantValue": 1}, "unit": {"constantValue": "day"}}}}, "start": {"valueReference": "63"}}}}, "rightField": {"valueReference": "18"}}}}, "65": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "26"}, "rightValue": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 1}, "list": {"valueReference": "64"}}}}}}}}}}, "19": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "20"}, "filter": {"valueReference": "62"}}}}, "filter": {"valueReference": "65"}}}}, "66": {"functionInvocationValue": {"functionName": "Date.millis", "arguments": {"date": {"valueReference": "63"}}}}, "17": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "18"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "19"}}}}, "value": {"valueReference": "66"}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "19"}}}}}}}, "67": {"constantValue": "True"}, "68": {"constantValue": "aggregate"}, "69": {"constantValue": "TOA"}, "74": {"constantValue": "2020-08-19"}, "75": {"constantValue": "2020-08-15"}, "73": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "74"}, "start": {"valueReference": "75"}}}}, "rightField": {"valueReference": "18"}}}}, "72": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "21"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "27"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "29"}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"valueReference": "31"}, "join": {"valueReference": "33"}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "34"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "51"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "53"}, "filter": {"valueReference": "73"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "59"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "61"}, "filter": {"valueReference": "73"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}}}}}}}}}}, "71": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "72"}, "filter": {"valueReference": "62"}}}}, "filter": {"valueReference": "65"}}}}, "70": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "18"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "71"}}}}, "value": {"valueReference": "66"}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "71"}}}}}}}, "3": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "4"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "5"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.merge", "arguments": {"collection1": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "8"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "9"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "10"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "11"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "12"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "13"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "14"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "15"}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "17"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "20"}, "property": {"valueReference": "23"}}}}}}}}}}}}}}}}, "value": {"valueReference": "56"}}}}, "value": {"valueReference": "55"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "68"}}}}, "value": {"valueReference": "69"}}}}, "collection2": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "8"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "9"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "10"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "11"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "12"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "13"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "14"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "15"}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "70"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "72"}, "property": {"valueReference": "23"}}}}}}}}}}}}}}}}, "value": {"valueReference": "75"}}}}, "value": {"valueReference": "74"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "68"}}}}, "value": {"valueReference": "69"}}}}}}}}}}}}}, "2": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "3"}, "filter": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "26"}, "rightValue": {"argumentReference": "_MAPPING_VAR_12_0"}}}}}}}, "77": {"arrayValue": {"values": [{"valueReference": "50"}]}}, "76": {"functionInvocationValue": {"functionName": "Image.displace", "arguments": {"displacement": {"functionInvocationValue": {"functionName": "Image.displacement", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"valueReference": "77"}, "input": {"argumentReference": "_MAPPING_VAR_11_0"}}}}, "maxOffset": {"constantValue": 20.0}, "patchWidth": {"constantValue": 20.0}, "referenceImage": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"valueReference": "77"}, "input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"functionInvocationValue": {"functionName": "Collection.toList", "arguments": {"collection": {"valueReference": "2"}, "count": {"constantValue": 1}}}}}}}}}}, "stiffness": {"constantValue": 5}}}}, "image": {"argumentReference": "_MAPPING_VAR_11_0"}}}}, "1": {"functionInvocationValue": {"functionName": "ImageCollection.merge", "arguments": {"collection1": {"functionInvocationValue": {"functionName": "Collection.limit", "arguments": {"collection": {"valueReference": "2"}, "limit": {"constantValue": 1}}}}, "collection2": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_11_0"], "body": "76"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "Collection.toList", "arguments": {"collection": {"valueReference": "2"}, "count": {"constantValue": 10000}, "offset": {"constantValue": 1}}}}}}}}}}}}}, "78": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "0": {"functionInvocationValue": {"functionName": "reduce.median", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.flatten", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection", "arguments": {"features": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_12_0"], "body": "1"}}, "list": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "78"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "3"}, "property": {"valueReference": "26"}}}}}}}}}}}}}}}}}}}, "filter": {"valueReference": "54"}}}}}}}}},{"min": 0.1, "max": [0.5, 0.6, 0.6], "bands": "swir2,nir,red", "gamma": 1.6},'preComposite Registered',false);
Map2.addSerializedLayer({"result": "0", "values": {"4": {"functionInvocationValue": {"functionName": "Image.reproject", "arguments": {"crs": {"functionInvocationValue": {"functionName": "Projection", "arguments": {"crs": {"constantValue": "EPSG:5070"}, "transform": {"constantValue": [10, 0, -2361915.0, 0, -10, 3177735.0]}}}}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "6": {"functionInvocationValue": {"functionName": "GeometryConstructors.Polygon", "arguments": {"coordinates": {"constantValue": [[[-122.53855824372827, 40.73858717935079], [-122.53855824372827, 38.67657688216227], [-117.26512074372827, 38.67657688216227], [-117.26512074372827, 40.73858717935079]]]}, "geodesic": {"constantValue": false}}}}, "5": {"functionInvocationValue": {"functionName": "Image.clip", "arguments": {"geometry": {"valueReference": "6"}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "7": {"constantValue": "toaOrSR"}, "8": {"constantValue": "resampleMethod"}, "9": {"constantValue": "addCloudProbability"}, "10": {"constantValue": "convertToDailyMosaics"}, "11": {"constantValue": "endJulian"}, "12": {"constantValue": "startJulian"}, "13": {"constantValue": "endDate"}, "14": {"constantValue": "startDate"}, "16": {"functionInvocationValue": {"functionName": "Image.updateMask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}, "mask": {"functionInvocationValue": {"functionName": "Image.reduce", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.mask", "arguments": {"image": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.min", "arguments": {}}}}}}}}}, "15": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "16"}}, "18": {"constantValue": "system:time_start"}, "23": {"constantValue": "date-orbit"}, "24": {"functionInvocationValue": {"functionName": "Date.format", "arguments": {"date": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "18"}}}}}}}, "format": {"constantValue": "YYYY-MM-dd"}}}}, "25": {"constantValue": "_"}, "26": {"constantValue": "SENSING_ORBIT_NUMBER"}, "22": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"constantValue": "date"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "23"}, "object": {"argumentReference": "_MAPPING_VAR_0_0"}, "value": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"functionInvocationValue": {"functionName": "String.cat", "arguments": {"string1": {"valueReference": "24"}, "string2": {"valueReference": "25"}}}}, "string2": {"functionInvocationValue": {"functionName": "Number.format", "arguments": {"number": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"valueReference": "26"}}}}}}}}}}}}}, "value": {"valueReference": "24"}}}}, "21": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "22"}}, "28": {"functionInvocationValue": {"functionName": "Image.reduceResolution", "arguments": {"bestEffort": {"constantValue": true}, "image": {"argumentReference": "_MAPPING_VAR_0_0"}, "maxPixels": {"constantValue": 64}, "reducer": {"functionInvocationValue": {"functionName": "Reducer.mean", "arguments": {}}}}}}, "27": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "28"}}, "30": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "primary"}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Element.get", "arguments": {"object": {"argumentReference": "_MAPPING_VAR_0_0"}, "property": {"constantValue": "secondary"}}}}}}}, "29": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "30"}}, "32": {"constantValue": "system:index"}, "31": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "32"}, "rightField": {"valueReference": "32"}}}}, "33": {"functionInvocationValue": {"functionName": "Join.inner", "arguments": {}}}, "36": {"constantValue": "QA60"}, "37": {"constantValue": "B1"}, "38": {"constantValue": "B2"}, "39": {"constantValue": "B3"}, "40": {"constantValue": "B4"}, "41": {"constantValue": "B5"}, "42": {"constantValue": "B6"}, "43": {"constantValue": "B7"}, "44": {"constantValue": "B8"}, "45": {"constantValue": "B8A"}, "46": {"constantValue": "B9"}, "47": {"constantValue": "B10"}, "48": {"constantValue": "B11"}, "49": {"constantValue": "B12"}, "50": {"constantValue": "nir"}, "35": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "36"}, {"valueReference": "37"}, {"valueReference": "38"}, {"valueReference": "39"}, {"valueReference": "40"}, {"valueReference": "41"}, {"valueReference": "42"}, {"valueReference": "43"}, {"valueReference": "44"}, {"valueReference": "45"}, {"valueReference": "46"}, {"valueReference": "47"}, {"valueReference": "48"}, {"valueReference": "49"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"arrayValue": {"values": [{"valueReference": "36"}, {"constantValue": "cb"}, {"constantValue": "blue"}, {"constantValue": "green"}, {"constantValue": "red"}, {"constantValue": "re1"}, {"constantValue": "re2"}, {"constantValue": "re3"}, {"valueReference": "50"}, {"constantValue": "nir2"}, {"constantValue": "waterVapor"}, {"constantValue": "cirrus"}, {"constantValue": "swir1"}, {"constantValue": "swir2"}]}}}}}, "34": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "35"}}, "52": {"functionInvocationValue": {"functionName": "Element.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Image.addBands", "arguments": {"dstImg": {"functionInvocationValue": {"functionName": "Image.divide", "arguments": {"image1": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "37"}, {"valueReference": "38"}, {"valueReference": "39"}, {"valueReference": "40"}, {"valueReference": "41"}, {"valueReference": "42"}, {"valueReference": "43"}, {"valueReference": "44"}, {"valueReference": "45"}, {"valueReference": "46"}, {"valueReference": "47"}, {"valueReference": "48"}, {"valueReference": "49"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "image2": {"functionInvocationValue": {"functionName": "Image.constant", "arguments": {"value": {"constantValue": 10000}}}}}}}, "srcImg": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"arrayValue": {"values": [{"valueReference": "36"}]}}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}}}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "properties": {"arrayValue": {"values": [{"valueReference": "18"}]}}, "source": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "51": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "52"}}, "53": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2"}}}}, "55": {"constantValue": "2019-08-19"}, "56": {"constantValue": "2019-08-15"}, "54": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "55"}, "start": {"valueReference": "56"}}}}, "rightField": {"valueReference": "18"}}}}, "57": {"functionInvocationValue": {"functionName": "Filter.calendarRange", "arguments": {"end": {"constantValue": 365}, "start": {"constantValue": 1}}}}, "58": {"functionInvocationValue": {"functionName": "Filter.intersects", "arguments": {"leftField": {"constantValue": ".all"}, "rightValue": {"functionInvocationValue": {"functionName": "Feature", "arguments": {"geometry": {"valueReference": "6"}}}}}}}, "60": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"constantValue": ["probability"]}, "input": {"argumentReference": "_MAPPING_VAR_0_0"}, "newNames": {"constantValue": ["cloud_probability"]}}}}, "59": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "60"}}, "61": {"functionInvocationValue": {"functionName": "ImageCollection.load", "arguments": {"id": {"constantValue": "COPERNICUS/S2_CLOUD_PROBABILITY"}}}}, "20": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "21"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "27"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "29"}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"valueReference": "31"}, "join": {"valueReference": "33"}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "34"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "51"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "53"}, "filter": {"valueReference": "54"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "59"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "61"}, "filter": {"valueReference": "54"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}}}}}}}}}}, "64": {"functionInvocationValue": {"functionName": "String.split", "arguments": {"regex": {"valueReference": "25"}, "string": {"argumentReference": "_MAPPING_VAR_6_0"}}}}, "63": {"functionInvocationValue": {"functionName": "Date", "arguments": {"value": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"valueReference": "64"}}}}}}}, "62": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"functionInvocationValue": {"functionName": "Date.advance", "arguments": {"date": {"valueReference": "63"}, "delta": {"constantValue": 1}, "unit": {"constantValue": "day"}}}}, "start": {"valueReference": "63"}}}}, "rightField": {"valueReference": "18"}}}}, "65": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "26"}, "rightValue": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 1}, "list": {"valueReference": "64"}}}}}}}}}}, "19": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "20"}, "filter": {"valueReference": "62"}}}}, "filter": {"valueReference": "65"}}}}, "66": {"functionInvocationValue": {"functionName": "Date.millis", "arguments": {"date": {"valueReference": "63"}}}}, "17": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "18"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "19"}}}}, "value": {"valueReference": "66"}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "19"}}}}}}}, "67": {"constantValue": "True"}, "68": {"constantValue": "aggregate"}, "69": {"constantValue": "TOA"}, "74": {"constantValue": "2020-08-19"}, "75": {"constantValue": "2020-08-15"}, "73": {"functionInvocationValue": {"functionName": "Filter.dateRangeContains", "arguments": {"leftValue": {"functionInvocationValue": {"functionName": "DateRange", "arguments": {"end": {"valueReference": "74"}, "start": {"valueReference": "75"}}}}, "rightField": {"valueReference": "18"}}}}, "72": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "21"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "27"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "29"}, "collection": {"functionInvocationValue": {"functionName": "Join.apply", "arguments": {"condition": {"valueReference": "31"}, "join": {"valueReference": "33"}, "primary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "34"}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "51"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "53"}, "filter": {"valueReference": "73"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}, "secondary": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "59"}, "collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "61"}, "filter": {"valueReference": "73"}}}}, "filter": {"valueReference": "57"}}}}, "filter": {"valueReference": "58"}}}}}}}}}}}}}}}}}}}, "71": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "72"}, "filter": {"valueReference": "62"}}}}, "filter": {"valueReference": "65"}}}}, "70": {"functionInvocationValue": {"functionName": "Image.copyProperties", "arguments": {"destination": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "18"}, "object": {"functionInvocationValue": {"functionName": "ImageCollection.mosaic", "arguments": {"collection": {"valueReference": "71"}}}}, "value": {"valueReference": "66"}}}}, "source": {"functionInvocationValue": {"functionName": "Collection.first", "arguments": {"collection": {"valueReference": "71"}}}}}}}, "3": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "4"}}, "collection": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "5"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.merge", "arguments": {"collection1": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "8"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "9"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "10"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "11"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "12"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "13"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "14"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "15"}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "17"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "20"}, "property": {"valueReference": "23"}}}}}}}}}}}}}}}}, "value": {"valueReference": "56"}}}}, "value": {"valueReference": "55"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "68"}}}}, "value": {"valueReference": "69"}}}}, "collection2": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "7"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "8"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "9"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "10"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "11"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "12"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "13"}, "object": {"functionInvocationValue": {"functionName": "Element.set", "arguments": {"key": {"valueReference": "14"}, "object": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"valueReference": "15"}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_6_0"], "body": "70"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "72"}, "property": {"valueReference": "23"}}}}}}}}}}}}}}}}, "value": {"valueReference": "75"}}}}, "value": {"valueReference": "74"}}}}, "value": {"constantValue": 1}}}}, "value": {"constantValue": 365}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "67"}}}}, "value": {"valueReference": "68"}}}}, "value": {"valueReference": "69"}}}}}}}}}}}}}, "2": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"valueReference": "3"}, "filter": {"functionInvocationValue": {"functionName": "Filter.equals", "arguments": {"leftField": {"valueReference": "26"}, "rightValue": {"argumentReference": "_MAPPING_VAR_12_0"}}}}}}}, "77": {"arrayValue": {"values": [{"valueReference": "50"}]}}, "76": {"functionInvocationValue": {"functionName": "Image.displace", "arguments": {"displacement": {"functionInvocationValue": {"functionName": "Image.displacement", "arguments": {"image": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"valueReference": "77"}, "input": {"argumentReference": "_MAPPING_VAR_11_0"}}}}, "maxOffset": {"constantValue": 20.0}, "patchWidth": {"constantValue": 20.0}, "referenceImage": {"functionInvocationValue": {"functionName": "Image.select", "arguments": {"bandSelectors": {"valueReference": "77"}, "input": {"functionInvocationValue": {"functionName": "List.get", "arguments": {"index": {"constantValue": 0}, "list": {"functionInvocationValue": {"functionName": "Collection.toList", "arguments": {"collection": {"valueReference": "2"}, "count": {"constantValue": 1}}}}}}}}}}, "stiffness": {"constantValue": 5}}}}, "image": {"argumentReference": "_MAPPING_VAR_11_0"}}}}, "1": {"functionInvocationValue": {"functionName": "ImageCollection.merge", "arguments": {"collection1": {"functionInvocationValue": {"functionName": "Collection.limit", "arguments": {"collection": {"valueReference": "2"}, "limit": {"constantValue": 1}}}}, "collection2": {"functionInvocationValue": {"functionName": "Collection.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_11_0"], "body": "76"}}, "collection": {"functionInvocationValue": {"functionName": "ImageCollection.fromImages", "arguments": {"images": {"functionInvocationValue": {"functionName": "Collection.toList", "arguments": {"collection": {"valueReference": "2"}, "count": {"constantValue": 10000}, "offset": {"constantValue": 1}}}}}}}}}}}}}, "78": {"functionInvocationValue": {"functionName": "Number.parse", "arguments": {"input": {"argumentReference": "_MAPPING_VAR_0_0"}}}}, "0": {"functionInvocationValue": {"functionName": "reduce.median", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.filter", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection.flatten", "arguments": {"collection": {"functionInvocationValue": {"functionName": "Collection", "arguments": {"features": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_12_0"], "body": "1"}}, "list": {"functionInvocationValue": {"functionName": "List.map", "arguments": {"baseAlgorithm": {"functionDefinitionValue": {"argumentNames": ["_MAPPING_VAR_0_0"], "body": "78"}}, "list": {"functionInvocationValue": {"functionName": "Dictionary.keys", "arguments": {"dictionary": {"functionInvocationValue": {"functionName": "AggregateFeatureCollection.histogram", "arguments": {"collection": {"valueReference": "3"}, "property": {"valueReference": "26"}}}}}}}}}}}}}}}}}}}, "filter": {"valueReference": "73"}}}}}}}}},{"min": 0.1, "max": [0.5, 0.6, 0.6], "bands": "swir2,nir,red", "gamma": 1.6},'postComposite Registered',false);
Map2.addSerializedLayer({"result": "0", "values": {"0": {"functionInvocationValue": {"functionName": "GeometryConstructors.Polygon", "arguments": {"coordinates": {"constantValue": [[[-122.53855824372827, 40.73858717935079], [-122.53855824372827, 38.67657688216227], [-117.26512074372827, 38.67657688216227], [-117.26512074372827, 40.73858717935079]]]}, "geodesic": {"constantValue": false}}}}}},{},'study area',true);
setTimeout(function(){$('#close-modal-button').click();}, 2500);
}