define(["@jupyter-widgets/base"],(e=>(()=>{"use strict";var t={306:e=>{e.exports=JSON.parse('{"name":"jupyter-bbox-widget","version":"0.1.0","description":"A Jupyter widget for annotating images with bounding boxes","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js"],"homepage":"https://github.com/gereleth/jupyter-bbox-widget","bugs":{"url":"https://github.com/gereleth/jupyter-bbox-widget/issues"},"license":"BSD-3-Clause","author":{"name":"gereleth","email":"daria.voznyak@gmail.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/gereleth/jupyter-bbox-widget"},"scripts":{"build":"npm run build:nbextension","build:labextension":"npm run clean:labextension && mkdirp jupyter_bbox_widget/labextension && cd jupyter_bbox_widget/labextension && npm pack ../..","build:nbextension":"webpack --mode=production","build:all":"npm run build:labextension && npm run build:nbextension","clean":"npm run clean:lib && npm run clean:nbextension","clean:lib":"rimraf lib","clean:labextension":"rimraf jupyter_bbox_widget/labextension","clean:nbextension":"rimraf jupyter_bbox_widget/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"npm run build","watch":"npm-run-all -p watch:*","watch:nbextension":"webpack --watch","dev":"webpack-cli serve --inline --hot --progress --content-base ./mock --open -o ./mock"},"dependencies":{"@jupyter-widgets/base":"^4.0.0"},"devDependencies":{"@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@tsconfig/svelte":"^1.0.10","@types/node":"^10.11.6","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","@webpack-cli/serve":"^1.2.2","acorn":"^7.2.0","css-loader":"^5.2.6","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^0.2.4","style-loader":"^1.0.0","svelte":"^3.0.0","svelte-loader":"2.13.3","svelte-preprocess":"^4.7.0","ts-loader":"^5.2.1","typescript":"^4.2.4","webpack":"^5.20.1","webpack-cli":"^4.4.0","webpack-dev-server":"^3.11.2"},"jupyterlab":{"extension":"lib/plugin"}}')},612:t=>{t.exports=e}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{o.r(l),o.d(l,{BBoxModel:()=>Oe,BBoxView:()=>Se,MODULE_NAME:()=>n,MODULE_VERSION:()=>t});const e=o(306),t=e.version,n=e.name;var s=o(612);function i(){}const r=e=>e;function c(e){return e()}function a(){return Object.create(null)}function u(e){e.forEach(c)}function d(e){return"function"==typeof e}function p(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function f(e){return 0===Object.keys(e).length}function h(e,t,n){e.$$.on_destroy.push(function(e,...t){if(null==e)return i;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(t,n))}function g(e,t,n=t){return e.set(n),t}const m="undefined"!=typeof window;let b=m?()=>window.performance.now():()=>Date.now(),v=m?e=>requestAnimationFrame(e):i;const y=new Set;function x(e){y.forEach((t=>{t.c(e)||(y.delete(t),t.f())})),0!==y.size&&v(x)}function w(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function _(e){e.parentNode.removeChild(e)}function k(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function j(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function M(e){return document.createTextNode(e)}function C(){return M(" ")}function E(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function O(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}let D;function B(){if(void 0===D){D=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){D=!0}}return D}function P(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const W=new Set;let A,I=0;function X(e,t,n,o,l,s,i,r=0){const c=16.666/o;let a="{\n";for(let e=0;e<=1;e+=c){const o=t+(n-t)*s(e);a+=100*e+`%{${i(o,1-o)}}\n`}const u=a+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${r}`,p=e.ownerDocument;W.add(p);const f=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(q("style")).sheet),h=p.__svelte_rules||(p.__svelte_rules={});h[d]||(h[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${l}ms 1 both`,I+=1,d}function Y(e){A=e}function T(){if(!A)throw new Error("Function called outside component initialization");return A}const N=[],L=[],R=[],H=[],V=Promise.resolve();let F=!1;function J(e){R.push(e)}function U(e){H.push(e)}let G=!1;const K=new Set;function Q(){if(!G){G=!0;do{for(let e=0;e<N.length;e+=1){const t=N[e];Y(t),Z(t.$$)}for(Y(null),N.length=0;L.length;)L.pop()();for(let e=0;e<R.length;e+=1){const t=R[e];K.has(t)||(K.add(t),t())}R.length=0}while(N.length);for(;H.length;)H.pop()();F=!1,G=!1,K.clear()}}function Z(e){if(null!==e.fragment){e.update(),u(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}let ee;function te(e,t,n){e.dispatchEvent(P(`${t?"intro":"outro"}${n}`))}const ne=new Set;let oe;function le(){oe={r:0,c:[],p:oe}}function se(){oe.r||u(oe.c),oe=oe.p}function ie(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function re(e,t,n,o){if(e&&e.o){if(ne.has(e))return;ne.add(e),oe.c.push((()=>{ne.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const ce={duration:0};function ae(e,t,n,o){let l=t(e,n),s=o?0:1,c=null,a=null,p=null;function f(){p&&function(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),l=n.length-o.length;l&&(e.style.animation=o.join(", "),I-=l,I||v((()=>{I||(W.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),W.clear())})))}(e,p)}function h(e,t){const n=e.b-s;return t*=Math.abs(n),{a:s,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(t){const{delay:n=0,duration:o=300,easing:d=r,tick:g=i,css:m}=l||ce,w={start:b()+n,b:t};t||(w.group=oe,oe.r+=1),c||a?a=w:(m&&(f(),p=X(e,s,t,o,n,d,m)),t&&g(0,1),c=h(w,o),J((()=>te(e,t,"start"))),function(e){let t;0===y.size&&v(x),new Promise((n=>{y.add(t={c:e,f:n})}))}((t=>{if(a&&t>a.start&&(c=h(a,o),a=null,te(e,c.b,"start"),m&&(f(),p=X(e,s,c.b,c.duration,0,d,l.css))),c)if(t>=c.end)g(s=c.b,1-s),te(e,c.b,"end"),a||(c.b?f():--c.group.r||u(c.group.c)),c=null;else if(t>=c.start){const e=t-c.start;s=c.a+c.d*d(e/c.duration),g(s,1-s)}return!(!c&&!a)})))}return{run(e){d(l)?(ee||(ee=Promise.resolve(),ee.then((()=>{ee=null}))),ee).then((()=>{l=l(),g(e)})):g(e)},end(){f(),c=a=null}}}let ue;function de(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function pe(e,t,n,o){const{fragment:l,on_mount:s,on_destroy:i,after_update:r}=e.$$;l&&l.m(t,n),o||J((()=>{const t=s.map(c).filter(d);i?i.push(...t):u(t),e.$$.on_mount=[]})),r.forEach(J)}function fe(e,t){const n=e.$$;null!==n.fragment&&(u(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function he(e,t,n,o,l,s,r=[-1]){const c=A;Y(e);const d=e.$$={fragment:null,ctx:null,props:s,update:i,not_equal:l,bound:a(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:t.context||[]),callbacks:a(),dirty:r,skip_bound:!1};let p=!1;if(d.ctx=n?n(e,t.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),p&&function(e,t){-1===e.$$.dirty[0]&&(N.push(e),F||(F=!0,V.then(Q)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],d.update(),p=!0,u(d.before_update),d.fragment=!!o&&o(d.ctx),t.target){if(t.hydrate){const e=(f=t.target,Array.from(f.childNodes));d.fragment&&d.fragment.l(e),e.forEach(_)}else d.fragment&&d.fragment.c();t.intro&&ie(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),Q()}var f;Y(c)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(ue=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(c).filter(d);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){u(this.$$.on_disconnect)}$destroy(){fe(this,1),this.$destroy=i}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!f(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class ge{$destroy(){fe(this,1),this.$destroy=i}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!f(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function me(e){let t,n,o,l,s,r,c,a,d,p,f,h,g,m,b,v,y,x,k,q,D,B,P,W,A,I,X,Y,T,N,L,R,H,V,F,J,U,G,K,Q,Z,ee,te,ne,oe,le,se,ie,re,ce,ae,ue,de,pe,fe,he,ge,me,be,ve,ye,xe,we,$e,_e,ke;return{c(){t=j("text"),n=M(e[4]),s=C(),r=j("text"),c=M(e[4]),p=C(),f=j("rect"),v=C(),y=j("line"),B=C(),P=j("line"),Y=C(),T=j("line"),V=C(),F=j("line"),Q=C(),Z=j("circle"),oe=C(),le=j("circle"),ce=C(),ae=j("circle"),fe=C(),he=j("circle"),ve=C(),ye=j("text"),xe=M("ðŸ—™"),O(t,"filter","url(#bg-text)"),O(t,"fill","black"),O(t,"x",o=e[2]*e[7]),O(t,"y",l=e[3]*e[8]-4),O(t,"class","svelte-1qdlnv1"),O(r,"x",a=e[2]*e[7]),O(r,"y",d=e[3]*e[8]-4),O(r,"fill","#333"),O(r,"class","svelte-1qdlnv1"),O(f,"width",h=e[0]*e[7]),O(f,"height",g=e[1]*e[8]),z(f,"fill-opacity",e[6]),z(f,"stroke-width",e[5]),z(f,"stroke",e[9]),O(f,"x",m=e[2]*e[7]),O(f,"y",b=e[3]*e[8]),O(f,"class","svelte-1qdlnv1"),O(y,"x1",x=e[2]*e[7]),O(y,"y1",k=e[3]*e[8]),O(y,"x2",q=(e[2]+e[0])*e[7]),O(y,"y2",D=e[3]*e[8]),z(y,"stroke-width","10px"),z(y,"stroke","black"),z(y,"stroke-opacity","0"),O(y,"class","top svelte-1qdlnv1"),O(P,"x1",W=e[2]*e[7]),O(P,"y1",A=(e[3]+e[1])*e[8]),O(P,"x2",I=(e[2]+e[0])*e[7]),O(P,"y2",X=(e[3]+e[1])*e[8]),z(P,"stroke-width","10px"),z(P,"stroke","black"),z(P,"stroke-opacity","0"),O(P,"class","bottom svelte-1qdlnv1"),O(T,"x1",N=e[2]*e[7]),O(T,"y1",L=e[3]*e[8]),O(T,"x2",R=e[2]*e[7]),O(T,"y2",H=(e[3]+e[1])*e[8]),z(T,"stroke-width","10px"),z(T,"stroke","black"),z(T,"stroke-opacity","0"),O(T,"class","left svelte-1qdlnv1"),O(F,"x1",J=(e[2]+e[0])*e[7]),O(F,"y1",U=e[3]*e[8]),O(F,"x2",G=(e[2]+e[0])*e[7]),O(F,"y2",K=(e[3]+e[1])*e[8]),z(F,"stroke-width","10px"),z(F,"stroke","black"),z(F,"stroke-opacity","0"),O(F,"class","right svelte-1qdlnv1"),O(Z,"cx",ee=e[2]*e[7]),O(Z,"cy",te=e[3]*e[8]),O(Z,"r",ne=6),O(Z,"fill-opacity","0"),O(Z,"class","top-left svelte-1qdlnv1"),O(le,"cx",se=(e[2]+e[0])*e[7]),O(le,"cy",ie=e[3]*e[8]),O(le,"r",re=6),O(le,"fill-opacity","0"),O(le,"class","top-right svelte-1qdlnv1"),O(ae,"cx",ue=e[2]*e[7]),O(ae,"cy",de=(e[3]+e[1])*e[8]),O(ae,"r",pe=6),O(ae,"fill-opacity","0"),O(ae,"class","bottom-left svelte-1qdlnv1"),O(he,"cx",ge=(e[2]+e[0])*e[7]),O(he,"cy",me=(e[3]+e[1])*e[8]),O(he,"r",be=6),O(he,"fill-opacity","0"),O(he,"class","bottom-right svelte-1qdlnv1"),O(ye,"x",we=(e[2]+e[0])*e[7]-13),O(ye,"y",$e=e[3]*e[8]-4),O(ye,"fill",e[9]),O(ye,"class","svelte-1qdlnv1")},m(o,l){$(o,t,l),w(t,n),$(o,s,l),$(o,r,l),w(r,c),$(o,p,l),$(o,f,l),$(o,v,l),$(o,y,l),$(o,B,l),$(o,P,l),$(o,Y,l),$(o,T,l),$(o,V,l),$(o,F,l),$(o,Q,l),$(o,Z,l),$(o,oe,l),$(o,le,l),$(o,ce,l),$(o,ae,l),$(o,fe,l),$(o,he,l),$(o,ve,l),$(o,ye,l),w(ye,xe),_e||(ke=[E(r,"mousedown",e[13]),E(f,"mousedown",e[10]),E(y,"mousedown",e[17]),E(P,"mousedown",e[18]),E(T,"mousedown",e[19]),E(F,"mousedown",e[20]),E(Z,"mousedown",e[21]),E(le,"mousedown",e[22]),E(ae,"mousedown",e[23]),E(he,"mousedown",e[24]),E(ye,"mousedown",e[12])],_e=!0)},p(e,s){16&s[0]&&S(n,e[4]),132&s[0]&&o!==(o=e[2]*e[7])&&O(t,"x",o),264&s[0]&&l!==(l=e[3]*e[8]-4)&&O(t,"y",l),16&s[0]&&S(c,e[4]),132&s[0]&&a!==(a=e[2]*e[7])&&O(r,"x",a),264&s[0]&&d!==(d=e[3]*e[8]-4)&&O(r,"y",d),129&s[0]&&h!==(h=e[0]*e[7])&&O(f,"width",h),258&s[0]&&g!==(g=e[1]*e[8])&&O(f,"height",g),64&s[0]&&z(f,"fill-opacity",e[6]),32&s[0]&&z(f,"stroke-width",e[5]),512&s[0]&&z(f,"stroke",e[9]),132&s[0]&&m!==(m=e[2]*e[7])&&O(f,"x",m),264&s[0]&&b!==(b=e[3]*e[8])&&O(f,"y",b),132&s[0]&&x!==(x=e[2]*e[7])&&O(y,"x1",x),264&s[0]&&k!==(k=e[3]*e[8])&&O(y,"y1",k),133&s[0]&&q!==(q=(e[2]+e[0])*e[7])&&O(y,"x2",q),264&s[0]&&D!==(D=e[3]*e[8])&&O(y,"y2",D),132&s[0]&&W!==(W=e[2]*e[7])&&O(P,"x1",W),266&s[0]&&A!==(A=(e[3]+e[1])*e[8])&&O(P,"y1",A),133&s[0]&&I!==(I=(e[2]+e[0])*e[7])&&O(P,"x2",I),266&s[0]&&X!==(X=(e[3]+e[1])*e[8])&&O(P,"y2",X),132&s[0]&&N!==(N=e[2]*e[7])&&O(T,"x1",N),264&s[0]&&L!==(L=e[3]*e[8])&&O(T,"y1",L),132&s[0]&&R!==(R=e[2]*e[7])&&O(T,"x2",R),266&s[0]&&H!==(H=(e[3]+e[1])*e[8])&&O(T,"y2",H),133&s[0]&&J!==(J=(e[2]+e[0])*e[7])&&O(F,"x1",J),264&s[0]&&U!==(U=e[3]*e[8])&&O(F,"y1",U),133&s[0]&&G!==(G=(e[2]+e[0])*e[7])&&O(F,"x2",G),266&s[0]&&K!==(K=(e[3]+e[1])*e[8])&&O(F,"y2",K),132&s[0]&&ee!==(ee=e[2]*e[7])&&O(Z,"cx",ee),264&s[0]&&te!==(te=e[3]*e[8])&&O(Z,"cy",te),133&s[0]&&se!==(se=(e[2]+e[0])*e[7])&&O(le,"cx",se),264&s[0]&&ie!==(ie=e[3]*e[8])&&O(le,"cy",ie),132&s[0]&&ue!==(ue=e[2]*e[7])&&O(ae,"cx",ue),266&s[0]&&de!==(de=(e[3]+e[1])*e[8])&&O(ae,"cy",de),133&s[0]&&ge!==(ge=(e[2]+e[0])*e[7])&&O(he,"cx",ge),266&s[0]&&me!==(me=(e[3]+e[1])*e[8])&&O(he,"cy",me),133&s[0]&&we!==(we=(e[2]+e[0])*e[7]-13)&&O(ye,"x",we),264&s[0]&&$e!==($e=e[3]*e[8]-4)&&O(ye,"y",$e),512&s[0]&&O(ye,"fill",e[9])},i,o:i,d(e){e&&_(t),e&&_(s),e&&_(r),e&&_(p),e&&_(f),e&&_(v),e&&_(y),e&&_(B),e&&_(P),e&&_(Y),e&&_(T),e&&_(V),e&&_(F),e&&_(Q),e&&_(Z),e&&_(oe),e&&_(le),e&&_(ce),e&&_(ae),e&&_(fe),e&&_(he),e&&_(ve),e&&_(ye),_e=!1,u(ke)}}}function be(e,t,n){let{width:o=0}=t,{height:l=0}=t,{x:s=0}=t,{y:i=0}=t,{label:r=""}=t,{colors:c=["red"]}=t,{classes:a=[]}=t,{strokeWidth:u=2}=t,{opacity:d=0}=t,{toImageCoordinates:p}=t,{scaleX:f=1}=t,{scaleY:h=1}=t;const g=function(){const e=T();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const l=P(t,n);o.slice().forEach((t=>{t.call(e,l)}))}}}();let m=0,b=0,v=0,y=0,x=!1,w=!1,$="rgb(255,64,64)";function _(e){e.stopPropagation(),e.preventDefault();const t=(e.clientX-m)/f,o=(e.clientY-b)/h;n(2,s=Math.round(v+t)),n(3,i=Math.round(y+o))}function k(e,t){e.stopPropagation(),e.preventDefault(),x=!1,w=!1,t.includes("top")?(w=!0,y=i+l):t.includes("bottom")&&(w=!0,y=i),t.includes("left")?(x=!0,v=s+o):t.includes("right")&&(x=!0,v=s),g("move",q)}function q(e){e.stopPropagation(),e.preventDefault();const t=p(e),r=Math.round(t.x),c=Math.round(t.y);x&&(n(2,s=Math.min(v,r)),n(0,o=Math.max(v,r)-s)),w&&(n(3,i=Math.min(y,c)),n(1,l=Math.max(y,c)-i))}var j;return j=()=>{v=s,y=i,m=s,b=i,x=!0,w=!0,g("create",q)},T().$$.on_mount.push(j),e.$$set=e=>{"width"in e&&n(0,o=e.width),"height"in e&&n(1,l=e.height),"x"in e&&n(2,s=e.x),"y"in e&&n(3,i=e.y),"label"in e&&n(4,r=e.label),"colors"in e&&n(14,c=e.colors),"classes"in e&&n(15,a=e.classes),"strokeWidth"in e&&n(5,u=e.strokeWidth),"opacity"in e&&n(6,d=e.opacity),"toImageCoordinates"in e&&n(16,p=e.toImageCoordinates),"scaleX"in e&&n(7,f=e.scaleX),"scaleY"in e&&n(8,h=e.scaleY)},e.$$.update=()=>{49168&e.$$.dirty[0]&&n(9,$=c[Math.max(0,a.indexOf(r)%c.length)])},[o,l,s,i,r,u,d,f,h,$,function(e){e.stopPropagation(),e.preventDefault(),m=e.clientX,b=e.clientY,v=s,y=i,g("move",_)},k,function(e){e.stopPropagation(),g("remove")},function(e){e.stopPropagation(),g("label")},c,a,p,e=>k(e,"top"),e=>k(e,"bottom"),e=>k(e,"left"),e=>k(e,"right"),e=>k(e,"top-left"),e=>k(e,"top-right"),e=>k(e,"bottom-left"),e=>k(e,"bottom-right")]}const ve=class extends ge{constructor(e){var t;super(),document.getElementById("svelte-1qdlnv1-style")||((t=q("style")).id="svelte-1qdlnv1-style",t.textContent="rect.svelte-1qdlnv1{cursor:move}.top.svelte-1qdlnv1,.bottom.svelte-1qdlnv1{cursor:row-resize}.left.svelte-1qdlnv1,.right.svelte-1qdlnv1{cursor:col-resize}text.svelte-1qdlnv1{cursor:pointer}.top-left.svelte-1qdlnv1{cursor:nw-resize}.top-right.svelte-1qdlnv1{cursor:ne-resize}.bottom-left.svelte-1qdlnv1{cursor:sw-resize}.bottom-right.svelte-1qdlnv1{cursor:se-resize}",w(document.head,t)),he(this,e,be,me,p,{width:0,height:1,x:2,y:3,label:4,colors:14,classes:15,strokeWidth:5,opacity:6,toImageCoordinates:16,scaleX:7,scaleY:8},[-1,-1])}},ye=[];function xe(e,t,n){const o=t,l=e.get(o),s=function(e,t=i){let n;const o=[];function l(t){if(p(e,t)&&(e=t,n)){const t=!ye.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),ye.push(n,e)}if(t){for(let e=0;e<ye.length;e+=2)ye[e][0](ye[e+1]);ye.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(s,r=i){const c=[s,r];return o.push(c),1===o.length&&(n=t(l)||i),s(e),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}(void 0===l?n:l);return e.on("change:"+o,(()=>s.set(e.get(o))),null),{set:t=>{s.set(t),e.set(o,t),e.save_changes()},subscribe:s.subscribe,update:t=>{s.update((n=>{let l=t(n);return e.set(o,l),e.save_changes(),l}))}}}function we(e,{delay:t=0,duration:n=400,easing:o=r}={}){const l=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:e=>"opacity: "+e*l}}function $e(e,t,n){const o=e.slice();return o[37]=t[n],o[39]=n,o}function _e(e,t,n){const o=e.slice();return o[40]=t[n],o[41]=t,o[39]=n,o}function ke(e){let t,n,o,l,s,i,r,c,a=e[9],d=[];for(let t=0;t<a.length;t+=1)d[t]=qe(_e(e,a,t));const p=e=>re(d[e],1,1,(()=>{d[e]=null}));return{c(){t=j("svg"),n=j("defs"),o=j("filter"),l=j("feFlood"),s=j("feComposite");for(let e=0;e<d.length;e+=1)d[e].c();O(l,"flood-color","rgba(255,255,255,0.5)"),O(s,"in","SourceGraphic"),O(s,"operator","xor"),O(o,"x","0"),O(o,"y","0"),O(o,"width","1"),O(o,"height","1"),O(o,"id","bg-text"),O(t,"width",e[3]),O(t,"height",e[2]),O(t,"class","svelte-1vgnekg")},m(a,u){$(a,t,u),w(t,n),w(n,o),w(o,l),w(o,s);for(let e=0;e<d.length;e+=1)d[e].m(t,null);i=!0,r||(c=[E(t,"mousedown",e[18]),E(t,"mousemove",e[20]),E(t,"mouseup",e[19])],r=!0)},p(e,n){if(14748605&n[0]){let o;for(a=e[9],o=0;o<a.length;o+=1){const l=_e(e,a,o);d[o]?(d[o].p(l,n),ie(d[o],1)):(d[o]=qe(l),d[o].c(),ie(d[o],1),d[o].m(t,null))}for(le(),o=a.length;o<d.length;o+=1)p(o);se()}(!i||8&n[0])&&O(t,"width",e[3]),(!i||4&n[0])&&O(t,"height",e[2])},i(e){if(!i){for(let e=0;e<a.length;e+=1)ie(d[e]);i=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)re(d[e]);i=!1},d(e){e&&_(t),k(d,e),r=!1,u(c)}}}function qe(e){let t,n,o,l,s,i,r,c,a;function u(t){e[27](t,e[40])}function d(t){e[28](t,e[40])}function p(t){e[29](t,e[40])}function f(t){e[30](t,e[40])}function h(t){e[31](t,e[40])}let g={toImageCoordinates:e[16],classes:e[0],colors:e[11],scaleX:e[3]/e[5],scaleY:e[2]/e[4]};return void 0!==e[40].x&&(g.x=e[40].x),void 0!==e[40].y&&(g.y=e[40].y),void 0!==e[40].width&&(g.width=e[40].width),void 0!==e[40].height&&(g.height=e[40].height),void 0!==e[40].label&&(g.label=e[40].label),n=new ve({props:g}),L.push((()=>de(n,"x",u))),L.push((()=>de(n,"y",d))),L.push((()=>de(n,"width",p))),L.push((()=>de(n,"height",f))),L.push((()=>de(n,"label",h))),n.$on("remove",(function(){return e[32](e[40])})),n.$on("move",e[33]),n.$on("create",e[23]),n.$on("label",(function(){return e[34](e[40],e[41],e[39])})),{c(){var e;t=j("g"),(e=n.$$.fragment)&&e.c()},m(e,o){$(e,t,o),pe(n,t,null),a=!0},p(t,c){e=t;const a={};1&c[0]&&(a.classes=e[0]),2048&c[0]&&(a.colors=e[11]),40&c[0]&&(a.scaleX=e[3]/e[5]),20&c[0]&&(a.scaleY=e[2]/e[4]),!o&&512&c[0]&&(o=!0,a.x=e[40].x,U((()=>o=!1))),!l&&512&c[0]&&(l=!0,a.y=e[40].y,U((()=>l=!1))),!s&&512&c[0]&&(s=!0,a.width=e[40].width,U((()=>s=!1))),!i&&512&c[0]&&(i=!0,a.height=e[40].height,U((()=>i=!1))),!r&&512&c[0]&&(r=!0,a.label=e[40].label,U((()=>r=!1))),n.$set(a)},i(e){a||(ie(n.$$.fragment,e),J((()=>{c||(c=ae(t,we,{duration:100},!0)),c.run(1)})),a=!0)},o(e){re(n.$$.fragment,e),c||(c=ae(t,we,{duration:100},!1)),c.run(0),a=!1},d(e){e&&_(t),fe(n),e&&c&&c.end()}}}function je(e){let t,n,o,l,s,i=e[37]+"";function r(){return e[35](e[37])}return{c(){t=q("span"),n=M(i),o=C(),O(t,"class","class-label svelte-1vgnekg"),z(t,"color",e[11][e[39]%e[11].length]),z(t,"border",(e[37]===e[7]?1:0)+"px solid "+e[11][e[39]%e[11].length])},m(e,i){$(e,t,i),w(t,n),w(t,o),l||(s=E(t,"click",r),l=!0)},p(o,l){e=o,1&l[0]&&i!==(i=e[37]+"")&&S(n,i),2048&l[0]&&z(t,"color",e[11][e[39]%e[11].length]),2177&l[0]&&z(t,"border",(e[37]===e[7]?1:0)+"px solid "+e[11][e[39]%e[11].length])},d(e){e&&_(t),l=!1,s()}}}function Me(e){let t,n,o,l,s,i,r,c,a,u,d,p,f,h=e[6]&&ke(e),g=e[0],m=[];for(let t=0;t<g.length;t+=1)m[t]=je($e(e,g,t));return{c(){t=q("div"),n=q("div"),o=q("img"),i=C(),h&&h.c(),r=C(),c=q("div"),a=q("p"),a.textContent="Classes:",u=C();for(let e=0;e<m.length;e+=1)m[e].c();o.src!==(l=e[10])&&O(o,"src",l),O(o,"alt","annotate me"),O(o,"class","svelte-1vgnekg"),O(n,"class","image svelte-1vgnekg"),J((()=>e[26].call(n))),O(c,"class","classes svelte-1vgnekg"),O(t,"class","wrapper svelte-1vgnekg")},m(l,g){$(l,t,g),w(t,n),w(n,o),e[25](o),s=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=q("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=B();let l;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=E(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{l=E(n.contentWindow,"resize",t)}),w(e,n),()=>{(o||l&&n.contentWindow)&&l(),_(n)}}(n,e[26].bind(n)),w(t,i),h&&h.m(t,null),w(t,r),w(t,c),w(c,a),w(c,u);for(let e=0;e<m.length;e+=1)m[e].m(c,null);d=!0,p||(f=E(o,"load",e[17]),p=!0)},p(e,n){if((!d||1024&n[0]&&o.src!==(l=e[10]))&&O(o,"src",l),e[6]?h?(h.p(e,n),64&n[0]&&ie(h,1)):(h=ke(e),h.c(),ie(h,1),h.m(t,r)):h&&(le(),re(h,1,1,(()=>{h=null})),se()),2177&n[0]){let t;for(g=e[0],t=0;t<g.length;t+=1){const o=$e(e,g,t);m[t]?m[t].p(o,n):(m[t]=je(o),m[t].c(),m[t].m(c,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=g.length}},i(e){d||(ie(h),d=!0)},o(e){re(h),d=!1},d(n){n&&_(t),e[25](null),s(),h&&h.d(),k(m,n),p=!1,f()}}}function Ce(e,t,n){let o,l,s,i,r,{model:c}=t,a=0,u=0,d=0,p=0,f=!1,m=xe(c,"image","");h(e,m,(e=>n(10,s=e)));let b=xe(c,"classes",[""]);h(e,b,(e=>n(0,l=e)));let v=xe(c,"colors",["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]);h(e,v,(e=>n(11,i=e)));let y=xe(c,"bboxes",[]);function x(e){const t=r.getBoundingClientRect();return{x:(e.clientX-t.left)*p/u,y:(e.clientY-t.top)*d/a}}h(e,y,(e=>n(9,o=e)));let w="",$=null,_=!1;function k(){g(y,o=[...o,{x:0,y:0,width:0,height:0,label:""}],o),g(y,o=o.slice(0,-1),o)}function q(e){g(y,o=o.filter((t=>t!==e)),o)}return e.$$set=e=>{"model"in e&&n(24,c=e.model)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(7,w=l.length>0?l[0]:"")},[l,r,a,u,d,p,f,w,$,o,s,i,m,b,v,y,x,function(){n(6,f=!0),n(5,p=r.naturalWidth),n(4,d=r.naturalHeight)},function(e){e.preventDefault();const{x:t,y:n}=x(e),l={x:Math.round(t),y:Math.round(n),width:0,height:0,label:w};_=!0,g(y,o=[...o,l],o)},function(e){e.preventDefault(),n(8,$=null),k()},function(e){null!==$&&$(e)},k,q,function(e){_&&(n(8,$=e.detail),_=!1)},c,function(e){L[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(){a=this.clientHeight,u=this.clientWidth,n(2,a),n(3,u)},function(t,n){e.$$.not_equal(n.x,t)&&(n.x=t,y.set(o))},function(t,n){e.$$.not_equal(n.y,t)&&(n.y=t,y.set(o))},function(t,n){e.$$.not_equal(n.width,t)&&(n.width=t,y.set(o))},function(t,n){e.$$.not_equal(n.height,t)&&(n.height=t,y.set(o))},function(t,n){e.$$.not_equal(n.label,t)&&(n.label=t,y.set(o))},e=>q(e),e=>n(8,$=e.detail),(e,t,n)=>{g(y,t[n].label=w,o),k()},e=>n(7,w=e)]}const Ee=class extends ge{constructor(e){var t;super(),document.getElementById("svelte-1vgnekg-style")||((t=q("style")).id="svelte-1vgnekg-style",t.textContent=".wrapper.svelte-1vgnekg{position:relative}.image.svelte-1vgnekg{display:table}img.svelte-1vgnekg{display:block}svg.svelte-1vgnekg{position:absolute;top:0;left:0}.class-label.svelte-1vgnekg{cursor:pointer;border-radius:4px;padding:4px;margin:4px}.classes.svelte-1vgnekg{margin-bottom:10px}",w(document.head,t)),he(this,e,Ce,Me,p,{model:24},[-1,-1])}};class Oe extends s.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:Oe.model_name,_model_module:Oe.model_module,_model_module_version:Oe.model_module_version,_view_name:Oe.view_name,_view_module:Oe.view_module,_view_module_version:Oe.view_module_version})}}Oe.serializers=Object.assign({},s.DOMWidgetModel.serializers),Oe.model_name="BBoxModel",Oe.model_module=n,Oe.model_module_version=t,Oe.view_name="BBoxView",Oe.view_module=n,Oe.view_module_version=t;class Se extends s.DOMWidgetView{render(){new Ee({target:this.el,props:{model:this.model}})}}window.__webpack_public_path__=document.querySelector("body").getAttribute("data-base-url")+"nbextensions/jupyter_bbox_widget"})(),l})()));
//# sourceMappingURL=index.js.map