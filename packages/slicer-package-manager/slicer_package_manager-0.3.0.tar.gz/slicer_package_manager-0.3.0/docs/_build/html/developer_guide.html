

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Developer Guide &mdash; Slicer Package Manager 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Server API" href="slicer_package_manager.html" />
    <link rel="prev" title="Credits" href="authors.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Slicer Package Manager
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Administrator Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">System Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">User Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands_shell.html">Commands shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#developer-installation">Developer Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Virtual environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-from-git">Install from Git</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run">Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#during-development">During development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#server-side-development">Server side development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#client-side-development">Client side development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-client-development">Python client development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#server-side-testing">Server Side Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-client-testing">Python Client Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#circleci-tests">CircleCI tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#regenerate-documentation-locally">Regenerate Documentation Locally</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-containers">Docker containers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slicer_package_manager.html">Server API</a></li>
<li class="toctree-l1"><a class="reference internal" href="slicer_package_manager_client.html">Python Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Maintainer Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="make_a_release.html">Making a release</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Slicer Package Manager</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Developer Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/developer_guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developer-guide">
<h1>Developer Guide<a class="headerlink" href="#developer-guide" title="Permalink to this headline">¶</a></h1>
<p>Since <strong>Slicer Package Manager</strong> is part of Girder plugins, it’s also split in 2 different parts:</p>
<ul class="simple">
<li><p>Back-end/server side (a CherryPy-based Python module)</p></li>
<li><p>Front-end/client side (a vue.js-based UI)</p></li>
</ul>
<p>To have a better idea of how contributing on a plugin within the Girder community,
let’s read the <a class="reference external" href="https://girder.readthedocs.io/en/latest/plugin-development.html">Plugin Development documentation</a>.</p>
<div class="section" id="developer-installation">
<h2>Developer Installation<a class="headerlink" href="#developer-installation" title="Permalink to this headline">¶</a></h2>
<p>You can either install the Slicer Package Manager natively on your machine or inside it’s own
<a class="reference external" href="https://docs.python-guide.org/en/latest/dev/virtualenvs/">virtual environment</a>.</p>
<div class="section" id="id1">
<h3>Virtual environment<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>While not strictly required, it is recommended to install the Slicer Package Manager and Girder
within its own virtual environment to isolate its dependencies from other python packages.
To generate a new virtual environment, first install/update the <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code>
packages:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo pip install -U virtualenv pip
</pre></div>
</div>
<p>Now create a virtual environment using the <a class="reference external" href="https://virtualenv.readthedocs.io/en/latest/user_guide.html">virtualenv command</a>. You can place the virtual environment directory wherever you want, but
it should not be moved. The following command will generate a new directory called
<code class="docutils literal notranslate"><span class="pre">slicer_package_manager_env</span></code> in your home directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ virtualenv ~/slicer_package_manager_env
</pre></div>
</div>
<p>Then to enter in the virtual environment, use the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ . ~/slicer_package_manager_env/bin/activate
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">(slicer_package_manager_env)</span></code> prepended to your prompt indicates you have entered the
virtual environment.</p>
</div>
</div>
<div class="section" id="install-from-git">
<h3>Install from Git<a class="headerlink" href="#install-from-git" title="Permalink to this headline">¶</a></h3>
<p>To easily develop the Slicer Package Manager, you will need to use some of Girder commands.
So let’s start by installing Girder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone --branch 2.x-maintenance https://github.com/girder/girder.git
$ cd girder
</pre></div>
</div>
<p>To run the server, you must install some external Python package dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -e .
</pre></div>
</div>
<p>This will provide you all the package needed to run the development environment. Then install
the front-end web client development dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ girder-install web --dev
</pre></div>
</div>
</div>
<div class="section" id="run">
<h3>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>To run the server, first make sure the Mongo daemon is running. To manually start it, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mongod &amp;
</pre></div>
</div>
<p>Then to run Girder itself, just use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ girder-server
</pre></div>
</div>
<p>The application should be accessible on <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a> in your web browser.</p>
</div>
</div>
<div class="section" id="during-development">
<h2>During development<a class="headerlink" href="#during-development" title="Permalink to this headline">¶</a></h2>
<p>Once Girder is started via <code class="docutils literal notranslate"><span class="pre">girder-server</span></code>, the server will reload itself whenever a server
source file is modified. If you are doing front-end development, it’s much faster to use a watch
process to perform automatic fast rebuilds of your code whenever you make changes to source files.</p>
<p>If you are front-end development of Slicer package manager plugin, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ girder-install web --watch-plugin slicer_package_manager
</pre></div>
</div>
</div>
<div class="section" id="server-side-development">
<h2>Server side development<a class="headerlink" href="#server-side-development" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference external" href="https://girder.readthedocs.io/en/latest/development.html#server-development">Server Development documentation</a> to know more about the good development practise in Girder</p>
</div>
<div class="section" id="client-side-development">
<h2>Client side development<a class="headerlink" href="#client-side-development" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference external" href="https://girder.readthedocs.io/en/latest/development.html#client-development">Client Development documentation</a> to know more about the good development practise in Girder</p>
</div>
<div class="section" id="python-client-development">
<h2>Python client development<a class="headerlink" href="#python-client-development" title="Permalink to this headline">¶</a></h2>
<p>The development of the <strong>Slicer Package Manager Client</strong> is in Python, it must work on both 2.7
and 3.5 version of python, and follow <a class="reference external" href="https://pypi.python.org/pypi/flake8">flake8</a> (the wrapper which verifies <code class="docutils literal notranslate"><span class="pre">pep8</span></code>, <code class="docutils literal notranslate"><span class="pre">pyflakes</span></code>
and <code class="docutils literal notranslate"><span class="pre">circular</span> <span class="pre">complexity</span></code>).</p>
<p>The python client use <a class="reference external" href="https://click.pocoo.org">click</a>, a command line library for Python.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Tests are the base of software development, they meant to check if what you’ve expected is really
happening and find issues you didn’t even think about. There are few thing you should know about
test within the Slicer Package Manager.</p>
<div class="section" id="server-side-testing">
<span id="id2"></span><h3>Server Side Testing<a class="headerlink" href="#server-side-testing" title="Permalink to this headline">¶</a></h3>
<p>As part of Girder, server test are done using <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a>.
Let’s read the <a class="reference external" href="https://girder.readthedocs.io/en/latest/development.html#server-side-testing">server test documentation</a> to know more about Girder testing.</p>
</div>
<div class="section" id="python-client-testing">
<span id="id3"></span><h3>Python Client Testing<a class="headerlink" href="#python-client-testing" title="Permalink to this headline">¶</a></h3>
<p>The Python Client use <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> to test its API. It also
uses a tool named <a class="reference external" href="https://pytest-vcr.readthedocs.io/en/latest/">pytest-vcr</a> to record the
server responses and be able to test the client within CircleCI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each time the client will change, or the tests, you will have to record the server an other
time by running the tests manually. But first, you will have to delete the old records.
All the server records should be saved as <code class="docutils literal notranslate"><span class="pre">.yml</span></code> file into the <code class="docutils literal notranslate"><span class="pre">cassettes</span></code> folder
next to your tests.
Delete this folder, and then run the tests again, it should create new records automatically.</p>
</div>
<p>To run manually these test run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pytest --tb=long plugin_tests/python_client_tests/test_python_client.py
</pre></div>
</div>
<p>The CLI is also briefly tested using a shell script. To see an example let’s take a look at the
<a class="reference external" href="https://github.com/girder/slicer_package_manager/blob/master/plugin_tests/python_client_tests/slicer_package_manager_client_test.sh">Source Code</a></p>
<p>This test is also used within CircleCi.</p>
<p>To run locally this test, from the <code class="docutils literal notranslate"><span class="pre">slicer_package_manager</span></code> folder run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd plugin_tests/python_client_tests
$ ./slicer_extension_manager_client_test.sh
</pre></div>
</div>
<p>It will run some of the commands available with the <code class="docutils literal notranslate"><span class="pre">slicer_package_manager_client</span></code>, check if
the upload and the download works and then delete everything.</p>
<p>This script could be take as a good example of using the <a class="reference internal" href="commands_shell.html"><span class="doc">Commands shell</span></a>.</p>
</div>
<div class="section" id="circleci-tests">
<h3>CircleCI tests<a class="headerlink" href="#circleci-tests" title="Permalink to this headline">¶</a></h3>
<p>In the <a class="reference external" href="https://github.com/girder/slicer_package_manager/blob/master/.circleci/config.yml">CircleCI configuration file</a>,
there are several test going on:</p>
<ul>
<li><p><a class="reference internal" href="#server-side-testing"><span class="std std-ref">Server Side Testing</span></a></p>
<blockquote>
<div><p>It will occurs each time a commit will be pushed on the repository (Source code at
<a class="reference external" href="https://github.com/girder/slicer_package_manager/blob/master/plugin_tests/s_e_m_test.py">s_e_m_test.py</a>).</p>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="#python-client-testing"><span class="std std-ref">Python Client Testing</span></a></p>
<blockquote>
<div><p>Both the python client API and the CLI are tested</p>
</div></blockquote>
</li>
<li><p>Docker containers testing</p>
<blockquote>
<div><p>Test the build and the deploy of the different <a class="reference internal" href="#docker-containers"><span class="std std-ref">Docker containers</span></a>.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="regenerate-documentation-locally">
<h2>Regenerate Documentation Locally<a class="headerlink" href="#regenerate-documentation-locally" title="Permalink to this headline">¶</a></h2>
<p>When developing new feature it’s very important to add some documentation to explain the community
what is it and how to use it. The Slicer Package Manager Documentation is build thanks to
<a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>, an open source documentation generator.</p>
<p>Here is some tools very useful to rapidly see what is result of your documentation.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">slicer_package_manager/docs</span></code> directory, just run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make docs
</pre></div>
</div>
<p>This will automatically create the API documentation for you and open a web browser tab to
visualize the documentation. If you don’t want to open a new tab and just rebuild the
documentation run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ make docs-only
</pre></div>
</div>
</div>
<div class="section" id="docker-containers">
<span id="id5"></span><h2>Docker containers<a class="headerlink" href="#docker-containers" title="Permalink to this headline">¶</a></h2>
<p>Docker containers allow an easy use and setup of the Slicer Package Manager. There are 3 different
containers that communique between themselves.</p>
<ul>
<li><p>The application container</p>
<blockquote>
<div><p>It contains both the <strong>Girder</strong> application with the <strong>Slicer Package Manager</strong> plugin enabled.</p>
</div></blockquote>
</li>
<li><p>The database container</p>
<blockquote>
<div><p>This one contains the <strong>MongoDB</strong> instance that allow the Girder and the Slicer Package
Manager to store all the data as Applications, Releases, Application or Extension packages.</p>
</div></blockquote>
</li>
<li><p>The provisioning container</p>
<blockquote>
<div><p>This container is special, it is only used once both the Girder server and the Mongo server
are running and connected to each other. It is meant to handle the server configuration and
make the use of the Slicer Package Manager much easier. By doing that it
<strong>enables the Slicer Package Manager plugin within Girder</strong>, create the first <strong>admin user</strong>,
and set up the <strong>assetstore</strong> used to store the binary files (In fact the DB only store
reference to these files, the real data are stored on your own machine in this assetstore).</p>
</div></blockquote>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="slicer_package_manager.html" class="btn btn-neutral float-right" title="Server API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="authors.html" class="btn btn-neutral float-left" title="Credits" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018, Kitware, Inc.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>